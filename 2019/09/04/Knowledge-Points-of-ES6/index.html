<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">



    <link rel="dns-prefetch" href="https://busuanzi.ibruce.info"/>












    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            ES6知识点归纳 | 
        
        Secret garden
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/iceCreamFavicon.png">
    <link rel="icon" href="/img/iceCreamFavicon.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="小雪糕的秘密fa园">
    <meta name="keywords" content="林峯,Raymond Lam,Life,汇总,前端,ES6,ECMAScript 6">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?U9E9WBr2I8FiIu2wnY3row==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(/img/bg.png);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Secret garden">
    <meta name="msapplication-starturl" content="https://niccce.github.io/2019/09/04/Knowledge-Points-of-ES6/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Secret garden">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/iceCreamFavicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://niccce.github.io/2019/09/04/Knowledge-Points-of-ES6/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="ES6知识点归纳 | Secret garden">
    <meta property="og:image" content="/img/iceCreamFavicon.png">
    <meta property="og:description" content="小雪糕的秘密fa园">
    <meta property="og:article:tag" content="汇总"> <meta property="og:article:tag" content="前端"> <meta property="og:article:tag" content="ES6"> <meta property="og:article:tag" content="ECMAScript 6"> 

    
        <meta property="article:published_time" content="Wed Sep 04 2019 14:38:00 GMT+0800">
        <meta property="article:modified_time" content="Sun Oct 06 2019 15:11:02 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://niccce.github.io/2019/09/04/Knowledge-Points-of-ES6/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://niccce.github.io/2019/09/04/Knowledge-Points-of-ES6/index.html",
    "headline": "ES6知识点归纳",
    "datePublished": "Wed Sep 04 2019 14:38:00 GMT+0800",
    "dateModified": "Sun Oct 06 2019 15:11:02 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "Niccce",
        "image": {
            "@type": "ImageObject",
            "url": "/img/Niccce.jpg"
        },
        "description": "<h3>小雪糕的秘密fa园</h3>"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Secret garden",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/iceCreamFavicon.png"
        }
    },
    "keywords": ",汇总,前端,ES6,ECMAScript 6林峯,Raymond Lam,Life",
    "description": "小雪糕的秘密fa园",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#var、let、const"><span class="post-toc-number">1.</span> <span class="post-toc-text">var、let、const</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#var"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">var</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#let"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">let</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#const"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">const</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#三者如何选择"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">三者如何选择</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#箭头函数"><span class="post-toc-number">2.</span> <span class="post-toc-text">箭头函数</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#语法简明"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">语法简明</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#可以隐式返回"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">可以隐式返回</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#this"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">this</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#箭头函数的不适用场景"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">箭头函数的不适用场景</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#函数参数的默认值"><span class="post-toc-number">3.</span> <span class="post-toc-text">函数参数的默认值</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#ES6-模版字符串"><span class="post-toc-number">4.</span> <span class="post-toc-text">ES6 模版字符串</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#基础用法"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">基础用法</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#标签模版"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">标签模版</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#最佳实践——过滤用户输入（防-xss-攻击）"><span class="post-toc-number">4.2.1.</span> <span class="post-toc-text">最佳实践——过滤用户输入（防 xss 攻击）</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#对象解构"><span class="post-toc-number">5.</span> <span class="post-toc-text">对象解构</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#数组解构"><span class="post-toc-number">6.</span> <span class="post-toc-text">数组解构</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#for-of"><span class="post-toc-number">7.</span> <span class="post-toc-text">for of</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#ES6-新增的字符串函数"><span class="post-toc-number">8.</span> <span class="post-toc-text">ES6 新增的字符串函数</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#startsWith"><span class="post-toc-number">8.1.</span> <span class="post-toc-text">.startsWith()</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#endsWith"><span class="post-toc-number">8.2.</span> <span class="post-toc-text">.endsWith()</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#includes"><span class="post-toc-number">8.3.</span> <span class="post-toc-text">.includes()</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#repeat"><span class="post-toc-number">8.4.</span> <span class="post-toc-text">.repeat()</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#ES6-为数组提供的新方法"><span class="post-toc-number">9.</span> <span class="post-toc-text">ES6 为数组提供的新方法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Array-from"><span class="post-toc-number">9.1.</span> <span class="post-toc-text">Array.from()</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Array-of"><span class="post-toc-number">9.2.</span> <span class="post-toc-text">Array.of()</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#ES6-中数组的新方法"><span class="post-toc-number">10.</span> <span class="post-toc-text">ES6 中数组的新方法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#find"><span class="post-toc-number">10.1.</span> <span class="post-toc-text">.find()</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#findIndex"><span class="post-toc-number">10.2.</span> <span class="post-toc-text">.findIndex()</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#some"><span class="post-toc-number">10.3.</span> <span class="post-toc-text">.some()</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#every"><span class="post-toc-number">10.4.</span> <span class="post-toc-text">.every()</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#剩余参数"><span class="post-toc-number">11.</span> <span class="post-toc-text">剩余参数</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#扩展运算符"><span class="post-toc-number">12.</span> <span class="post-toc-text">扩展运算符</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#其他运用场景"><span class="post-toc-number">12.1.</span> <span class="post-toc-text">其他运用场景</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#对象字面量的改进"><span class="post-toc-number">13.</span> <span class="post-toc-text">对象字面量的改进</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Promise"><span class="post-toc-number">14.</span> <span class="post-toc-text">Promise</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#axios（promise-库）"><span class="post-toc-number">14.1.</span> <span class="post-toc-text">axios（promise 库）</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#编写一个简单的-promise"><span class="post-toc-number">14.2.</span> <span class="post-toc-text">编写一个简单的 promise</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#处理多个-Promise"><span class="post-toc-number">14.3.</span> <span class="post-toc-text">处理多个 Promise</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Symbol"><span class="post-toc-number">15.</span> <span class="post-toc-text">Symbol</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#模块（Modules）"><span class="post-toc-number">16.</span> <span class="post-toc-text">模块（Modules）</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#class-继承语法糖"><span class="post-toc-number">17.</span> <span class="post-toc-text">class 继承语法糖</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#原型继承"><span class="post-toc-number">17.1.</span> <span class="post-toc-text">原型继承</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#class-语法"><span class="post-toc-number">17.2.</span> <span class="post-toc-text">class 语法</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#class-继承"><span class="post-toc-number">17.3.</span> <span class="post-toc-text">class 继承</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#扩展内建对象-Array"><span class="post-toc-number">17.4.</span> <span class="post-toc-text">扩展内建对象 Array</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Iterator（遍历器-迭代器）"><span class="post-toc-number">18.</span> <span class="post-toc-text">Iterator（遍历器/迭代器）</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Generator（生成器）"><span class="post-toc-number">19.</span> <span class="post-toc-text">Generator（生成器）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#简单语法"><span class="post-toc-number">19.1.</span> <span class="post-toc-text">简单语法</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#其他例子"><span class="post-toc-number">19.2.</span> <span class="post-toc-text">其他例子</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Generator应用"><span class="post-toc-number">19.3.</span> <span class="post-toc-text">Generator应用</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Proxy"><span class="post-toc-number">20.</span> <span class="post-toc-text">Proxy</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#什么是Proxy"><span class="post-toc-number">20.1.</span> <span class="post-toc-text">什么是Proxy</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Proxy应用例子"><span class="post-toc-number">20.2.</span> <span class="post-toc-text">Proxy应用例子</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Set"><span class="post-toc-number">21.</span> <span class="post-toc-text">Set</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#WeakSet"><span class="post-toc-number">22.</span> <span class="post-toc-text">WeakSet</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Map"><span class="post-toc-number">23.</span> <span class="post-toc-text">Map</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#WeakMap"><span class="post-toc-number">24.</span> <span class="post-toc-text">WeakMap</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 13 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                ES6知识点归纳
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/Niccce.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <!--<strong>Niccce</strong>-->
        <!--<span>9月 04, 2019</span>-->
        <span>发表：2019.09.04</span>
        <span>更新：2019.10.06</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">在其它设备中阅读本文章</li>
    
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAACyklEQVR42u3aQW4jMQwEQP//07sPCLDuJu2sLZVOQYIZqSYHQmw+/ly5HtjY2NjY2NjY2NgfyX7E6+dTyXuiA8W7rM6MjY2NfTQ7OVZy6J9bzn7O35mfGRsbG/sGdnv05Kn82WSv2ZmxsbGxsf+NeccnyC9C2NjY2Ngbdt5Cat+2eQM2Njb2zez80O+IE9q//movDRsbG/vj2Tnjc37+1XwbGxsb+4PZ7cqLx+aDzvZ9cipsbGzsQ9mbhlFbeNpg4FXnxMbGxj6bXTRlFsM3SWC8DwCe/B4bGxv7SnY7gpMM97RXjrxEPdkXGxsb+2h2ftnYDN+0TaX2clIEvdjY2NgHsTet/Jydt6hetS82Njb2Pey8tdQ28ZMS2F5jNtEvNjY29qnsdqgxD3rbsHbW0iqaWdjY2NiHsvOYdlaQkiI0a1S18QM2Njb22eykIG3C12T4pi2cbesKGxsb+wb27ILRjvvsW07JP6PupWFjY2N/ObstEm1bf4ZpP9ywqYSNjY395ey82MyKXBvW5lFB/TmwsbGxj2bPMG1TacabxRj1yA42Njb217Lzh5PYddZgSt7WFkJsbGzs29htk2hPbcF5ER3m29jY2Nhfy35VsDocoymL1luaStjY2NjHsfOgd/b52pghjx+K4UtsbGzso9mbg+ZXmgQwC5vrVAQbGxv7OHYb5eaXkFlM28YJb6nb2NjY2F/C3peuPFSYjXu25RYbGxsbO79m5LDZR5ktbGxs7BvY7crj2OKSMGLkIQQ2Njb22exhMViXulnEO3sWGxsb+wb2PlKdjWy2rahkX2xsbOyb2Xnx2Bw9bzm1xXXVS8PGxsa+mN3GA3m7Kh8MiuJnbGxsbOxFiNteSNrW/38uYNjY2Ngfw56Fu8n4Totvi2V0ZmxsbOyj2W3jpr1yvKwIleM+2NjY2Dew71nY2NjY2NjY2NjYH7P+AnqHe+7o6eYrAAAAAElFTkSuQmCC">
    
</ul>

    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/ECMAScript-6/">ECMAScript 6</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/ES6/">ES6</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/前端/">前端</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/汇总/">汇总</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    
        
            <!-- Busuanzi Views -->
            <a class="post_share-link" href="#">
                <li class="mdl-menu__item">
                    <span id="busuanzi_container_page_pv">
                        <!--<span id="busuanzi_value_page_pv"></span>&nbsp;浏览量-->
                        浏览量：<span id="busuanzi_value_page_pv"></span>
                    </span>
                </li>
            </a>
        
    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=ES6知识点归纳&url=https://niccce.github.io/2019/09/04/Knowledge-Points-of-ES6/index.html&pic=https://niccce.github.io/img/iceCreamFavicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=ES6知识点归纳&url=https://niccce.github.io/2019/09/04/Knowledge-Points-of-ES6/index.html&via=Niccce" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://niccce.github.io/2019/09/04/Knowledge-Points-of-ES6/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://niccce.github.io/2019/09/04/Knowledge-Points-of-ES6/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    
        <a class="post_share-link" href="https://www.linkedin.com/shareArticle?mini=true&url=https://niccce.github.io/2019/09/04/Knowledge-Points-of-ES6/index.html&title=ES6知识点归纳" target="_blank">
            <li class="mdl-menu__item">
                分享到 LinkedIn
            </li>
        </a>
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=Secret garden&title=ES6知识点归纳&summary=小雪糕的秘密fa园&pics=https://niccce.github.io/img/iceCreamFavicon.png&url=https://niccce.github.io/2019/09/04/Knowledge-Points-of-ES6/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>参考书籍：<a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener">http://es6.ruanyifeng.com/</a><br>参考视频：<a href="https://www.bilibili.com/video/av47304735" target="_blank" rel="noopener">https://www.bilibili.com/video/av47304735</a></p>
<h1 id="var、let、const"><a href="#var、let、const" class="headerlink" title="var、let、const"></a>var、let、const</h1><h2 id="var"><a href="#var" class="headerlink" title="var"></a><code>var</code></h2><ol>
<li>可以重复声明、可以重新赋值</li>
<li>在函数中声明变量，则只能在函数中使用（var 声明的变量的作用域属于 Function Scope）</li>
<li>用 var 在 if 语句的代码块中声明，因为没有函数，所以在 if 语句的代码块外也能访问</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> i = <span class="string">"hi"</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(i); <span class="comment">//hi</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(i); <span class="comment">//hi</span></span><br><span class="line">&#125;</span><br><span class="line">hi();</span><br><span class="line"><span class="built_in">console</span>.log(i); <span class="comment">//delete.html:26 Uncaught ReferenceError: i is not defined</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>存在变量提升，声明的语句会被提升到作用域最上方，赋值语句不被提升，留在原地</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(i);</span><br><span class="line"><span class="keyword">var</span> i = <span class="number">1</span>; <span class="comment">//undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//相当于</span></span><br><span class="line"><span class="comment">//var i;</span></span><br><span class="line"><span class="comment">//console.log(i);</span></span><br><span class="line"><span class="comment">//i=1;</span></span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i); <span class="comment">//0 1 2 3 4,这行语句在for循环执行的时候立即执行</span></span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i); <span class="comment">//5 5 5 5 5 ,for循环结束后执行</span></span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>解决方法就是改用 let</li>
</ul>
<h2 id="let"><a href="#let" class="headerlink" title="let"></a><code>let</code></h2><ol>
<li>不可以重复声明、可以重新赋值</li>
<li><p>用 let 声明变量，只在代码块内可访问（let 声明的变量的作用域属于 block scope）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> count = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> discount = <span class="number">0.9</span>;</span><br><span class="line"><span class="keyword">const</span> key = <span class="string">"abc"</span>;</span><br><span class="line"><span class="keyword">if</span> (count &gt; <span class="number">5</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> discount = <span class="number">0.5</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(discount); <span class="comment">//0.5</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(discount); <span class="comment">//0.9</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> count = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> count = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// Uncaught SyntaxError: Identifier 'count' has already been declared</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>存在变量提升，但因为存在作用域死区（Temporal dead zone），但是若想在当前块级作用域中，这个变量声明之前引用这个变量，就会报错。</p>
<ul>
<li>即<strong>在这个作用域开始直到这个变量声明之前，这个变量都处在临时性死区当中，这时引用它会报 ReferenceError</strong></li>
</ul>
</li>
</ol>
<h2 id="const"><a href="#const" class="headerlink" title="const"></a><code>const</code></h2><ol>
<li>不可以重复声明、不可以重新赋值</li>
<li>用 const 声明时必须立刻赋值</li>
<li><p>用 const 声明变量，只在代码块内可访问（属于 block scope）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> key = <span class="string">"123"</span>;</span><br><span class="line">key = <span class="string">"456"</span>; <span class="comment">//delete.html:19 Uncaught TypeError: Assignment to constant variable.</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> key;<span class="comment">//Uncaught SyntaxError: Missing initializer in const declaration</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> key = <span class="string">"123"</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(key); <span class="comment">//123</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(key); <span class="comment">//delete.html:22 Uncaught ReferenceError: key is not defined</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>注意：这样也是不可以的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> i = <span class="number">1</span>; <span class="comment">//Uncaught SyntaxError: Identifier 'i' has already been declared</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li><p>若用 const 声明时，给它的是一个对象，那么，对象的属性仍能改变，因为 const 指向的是对象的引用，这个引用不能变</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  name: <span class="string">"Alred"</span>,</span><br><span class="line">  age: <span class="number">30</span></span><br><span class="line">&#125;;</span><br><span class="line">person = &#123;</span><br><span class="line">  name: <span class="string">"Alfred"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//delete.html:22 Uncaught TypeError: Assignment to constant variable.</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  name: <span class="string">"Alred"</span>,</span><br><span class="line">  age: <span class="number">30</span></span><br><span class="line">&#125;;</span><br><span class="line">person.age = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">console</span>.log(person); <span class="comment">//正常输出且不报错，其中age为20</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>也可以这样赋值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> abc = &#123;</span><br><span class="line">  name: <span class="string">"Raymond"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> person2 = abc;</span><br></pre></td></tr></table></figure>
<ul>
<li>若希望对象的属性值也不修改的话，可以使用 Object.freeze()方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  name: <span class="string">"Alred"</span>,</span><br><span class="line">  age: <span class="number">30</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.freeze(person); <span class="comment">//不允许改变对象的属性值</span></span><br><span class="line">person.age = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">console</span>.log(person.age); <span class="comment">//30</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>存在变量提升，也存在作用域死区（和 let 一样）</li>
</ol>
<h2 id="三者如何选择"><a href="#三者如何选择" class="headerlink" title="三者如何选择"></a>三者如何选择</h2><ul>
<li>默认使用 const</li>
<li>当变量需要重新绑定或更新的时候使用 let</li>
<li>在 ES6 中尽量不适用 var</li>
</ul>
<h1 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h1><h2 id="语法简明"><a href="#语法简明" class="headerlink" title="语法简明"></a>语法简明</h2><ul>
<li><p>没有参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    () =&gt; &#123; ... &#125; <span class="comment">// 没有参数</span></span><br><span class="line">    x =&gt; &#123; ... &#125; <span class="comment">// 一个参数，括号可加可不加(x)=&gt;&#123;...&#125;</span></span><br><span class="line">(x, y) =&gt; &#123; ... &#125; <span class="comment">// 多个参数</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">const</span> double = numbers.map(<span class="function"><span class="keyword">function</span>(<span class="params">number</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> number * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> double2 = numbers.map(<span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> number * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(double); <span class="comment">// [2, 4, 6, 8, 10]</span></span><br><span class="line"><span class="built_in">console</span>.log(double2); <span class="comment">// [2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="可以隐式返回"><a href="#可以隐式返回" class="headerlink" title="可以隐式返回"></a>可以隐式返回</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;; <span class="comment">// 语句块</span></span><br><span class="line">x =&gt; x * x; <span class="comment">// 表达式，和上一行作用相同</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">const</span> double = numbers.map(<span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> number * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> double2 = numbers.map(<span class="function"><span class="params">number</span> =&gt;</span> number * <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(double); <span class="comment">// [2, 4, 6, 8, 10]</span></span><br><span class="line"><span class="built_in">console</span>.log(double2); <span class="comment">// [2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure>
<h2 id="this"><a href="#this" class="headerlink" title="this"></a>this</h2><ol>
<li>箭头函数没有自己的 this 值，它的 this 是继承它的父作用域的（即上层作用域）</li>
<li>箭头函数在指定的时候 this 已经确定，一般情况下不会因为调用而改变，不过会随上层作用域的 this 的变化而变化</li>
</ol>
<ul>
<li>先看一个例子</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Alfred = &#123;</span><br><span class="line">  name: <span class="string">"Alfred"</span>,</span><br><span class="line">  hobbies: [<span class="string">"singing"</span>, <span class="string">"dancing"</span>, <span class="string">"composeing"</span>],</span><br><span class="line">  printHobbies: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.hobbies.map(<span class="function"><span class="keyword">function</span>(<span class="params">hobby</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//window</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span> loves <span class="subst">$&#123;hobby&#125;</span>`</span>); <span class="comment">//输出内容都缺了Alfred</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">Alfred.printHobbies();</span><br></pre></td></tr></table></figure>
<p>调用 Alfred 中的 printHobbies()，第一个 this 指向 Alfred，然后 printHobbies 里的那个函数，是 map 方法的一个回调函数，这个方法是独立运行的，因此这个方法指向的是 window</p>
<ul>
<li>解决方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Alfred = &#123;</span><br><span class="line">  name: <span class="string">"Alfred"</span>,</span><br><span class="line">  hobbies: [<span class="string">"singing"</span>, <span class="string">"dancing"</span>, <span class="string">"composeing"</span>],</span><br><span class="line">  printHobbies: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">this</span>.hobbies.map(<span class="function"><span class="keyword">function</span>(<span class="params">hobby</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;_this.name&#125;</span> loves <span class="subst">$&#123;hobby&#125;</span>`</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">Alfred.printHobbies();</span><br></pre></td></tr></table></figure>
<p>或者，使用箭头函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Alfred = &#123;</span><br><span class="line">  name: <span class="string">"Alfred"</span>,</span><br><span class="line">  hobbies: [<span class="string">"singing"</span>, <span class="string">"dancing"</span>, <span class="string">"composeing"</span>],</span><br><span class="line">  printHobbies: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.hobbies.map(<span class="function"><span class="params">hobby</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span> loves <span class="subst">$&#123;hobby&#125;</span>`</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">Alfred.printHobbies();</span><br></pre></td></tr></table></figure>
<ul>
<li>另外：由于箭头函数是匿名函数，所以一般会把函数赋值给一个变量</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> greet = <span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(name);</span><br><span class="line">&#125;;</span><br><span class="line">greet(<span class="string">"Alfred"</span>);</span><br></pre></td></tr></table></figure>
<h2 id="箭头函数的不适用场景"><a href="#箭头函数的不适用场景" class="headerlink" title="箭头函数的不适用场景"></a>箭头函数的不适用场景</h2><ol>
<li>不能作为构造函数，不能用于定义对象方法</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// const person = (name, points) =&gt; &#123;       //Uncaught TypeError: person is not a constructor</span></span><br><span class="line"><span class="keyword">const</span> person = <span class="function"><span class="keyword">function</span>(<span class="params">name, points</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.points = points;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> Alfred = <span class="keyword">new</span> person(<span class="string">"Alfred"</span>, <span class="number">30</span>);</span><br><span class="line"><span class="comment">// person.prototype.updatePoints = () =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     console.log(this);//Window，因为箭头函数不会绑定this，但是方法又需要绑定到对象上，因此不能用</span></span><br><span class="line"><span class="comment">//     this.points--;</span></span><br><span class="line"><span class="comment">//     console.log(this.points);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// Alfred.updatePoints(); //NaN</span></span><br><span class="line">person.prototype.updatePoints = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//person</span></span><br><span class="line">  <span class="keyword">this</span>.points--;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.points);</span><br><span class="line">&#125;;</span><br><span class="line">Alfred.updatePoints(); <span class="comment">//29</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li><p>真的需要用到 this 的时候不能使用箭头函数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">"app"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">"width: 50px ; height: 50px; background-color: #000000;"</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="built_in">document</span>.getElementById(<span class="string">"app"</span>);</span><br><span class="line"><span class="comment">// app.addEventListener('click', () =&gt; &#123;</span></span><br><span class="line">app.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//此处的方法需要绑定到app上，但是用箭头函数是不会进行绑定的</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//Window</span></span><br><span class="line">  <span class="keyword">this</span>.style.height = <span class="string">"100px"</span>;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//此处希望this仍然指向app，使用箭头函数可以使this与外层保持一致</span></span><br><span class="line">    <span class="keyword">this</span>.style.height = <span class="string">"50px"</span>;</span><br><span class="line">  &#125;, <span class="number">500</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>需要使用 arguments 对象</strong>时不能使用箭头函数</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sum函数返回所有参数的和</span></span><br><span class="line"><span class="comment">// const sum = () =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     return Array.from(arguments).reduce((preSum, value) =&gt; preSum + value, 0)</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// sum(1, 2, 3); //delete.html:19 Uncaught ReferenceError: arguments is not defined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="built_in">arguments</span>).reduce(<span class="function">(<span class="params">preSum, value</span>) =&gt;</span> preSum + value, <span class="number">0</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)); <span class="comment">//6</span></span><br></pre></td></tr></table></figure>
<h1 id="函数参数的默认值"><a href="#函数参数的默认值" class="headerlink" title="函数参数的默认值"></a>函数参数的默认值</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">multiply</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  a = a || <span class="number">5</span>;</span><br><span class="line">  b = b || <span class="number">3</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(a * b);</span><br><span class="line">&#125;</span><br><span class="line">multiply(); <span class="comment">//15，均使用了默认值</span></span><br><span class="line">multiply(<span class="number">2</span>, <span class="number">3</span>); <span class="comment">//6，使用了参数的值</span></span><br><span class="line">multiply(<span class="number">1</span>); <span class="comment">//3，b使用了默认值</span></span><br><span class="line">multiply(<span class="literal">undefined</span>, <span class="number">2</span>); <span class="comment">//10，a使用了默认值</span></span><br></pre></td></tr></table></figure>
<p>用 ES6 可以简化为</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">multiply</span>(<span class="params">a = <span class="number">5</span>, b = <span class="number">3</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a * b);</span><br><span class="line">&#125;</span><br><span class="line">multiply(); <span class="comment">//15，均使用了默认值</span></span><br><span class="line">multiply(<span class="number">2</span>, <span class="number">3</span>); <span class="comment">//6，使用了参数的值</span></span><br><span class="line">multiply(<span class="number">1</span>); <span class="comment">//3，b使用了默认值</span></span><br><span class="line">multiply(<span class="literal">undefined</span>, <span class="number">2</span>); <span class="comment">//10，a使用了默认值，不能是multiply(, 2);必须要指明前面的参数</span></span><br><span class="line">multiply(<span class="literal">null</span>, <span class="number">2</span>); <span class="comment">//0，不会使用默认值</span></span><br></pre></td></tr></table></figure>
<ul>
<li>如果有传参，则使用传进来的值，如果没有传值，函数默认传的是 undefined，if(typeof a === undefined),就会使用默认值</li>
</ul>
<h1 id="ES6-模版字符串"><a href="#ES6-模版字符串" class="headerlink" title="ES6 模版字符串"></a>ES6 模版字符串</h1><h2 id="基础用法"><a href="#基础用法" class="headerlink" title="基础用法"></a>基础用法</h2><ul>
<li>用反引号”`”来定义字符串</li>
<li>用<code>${}</code>来引用变量，也可以放表达式、对象的属性、函数</li>
<li>直接使用反引号可以保存 html 代码的层级结构，不需要用\或数组去模拟</li>
<li>模版字符串可以嵌套使用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = <span class="string">"Alfred"</span>;</span><br><span class="line"><span class="keyword">const</span> age = <span class="number">30</span>;</span><br><span class="line"><span class="keyword">const</span> sentence = person + <span class="string">" is "</span> + age + <span class="string">" years old"</span>; <span class="comment">//es5</span></span><br><span class="line"><span class="keyword">const</span> sentence2 = <span class="string">`<span class="subst">$&#123;person&#125;</span> is <span class="subst">$&#123;age * <span class="number">2</span>&#125;</span> years old`</span>; <span class="comment">//es6</span></span><br><span class="line"><span class="keyword">const</span> template = <span class="string">`</span></span><br><span class="line"><span class="string">&lt;div&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;Hello&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">`</span>.trim();</span><br><span class="line"><span class="built_in">console</span>.log(sentence);</span><br><span class="line"><span class="built_in">console</span>.log(sentence2);</span><br><span class="line"><span class="built_in">console</span>.log(template);</span><br></pre></td></tr></table></figure>
<p>简单应用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Alfred = &#123;</span><br><span class="line">  name: <span class="string">"Alfred"</span>,</span><br><span class="line">  todos: [</span><br><span class="line">    &#123;</span><br><span class="line">      thing: <span class="string">"Go to the gym"</span>,</span><br><span class="line">      completed: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      thing: <span class="string">"sing a song"</span>,</span><br><span class="line">      completed: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      thing: <span class="string">"dance"</span>,</span><br><span class="line">      completed: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> template = <span class="string">`</span></span><br><span class="line"><span class="string">&lt;ul&gt;</span></span><br><span class="line"><span class="string">    <span class="subst">$&#123;Alfred.todos</span></span></span><br><span class="line"><span class="string"><span class="subst">      .map(</span></span></span><br><span class="line"><span class="string"><span class="subst">        todos =&gt; <span class="string">`</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">        &lt;li&gt;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">            <span class="subst">$&#123;todos.thing&#125;</span> <span class="subst">$&#123;todos.completed ? <span class="string">"(yes)"</span> : <span class="string">"(no)"</span>&#125;</span></span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">        &lt;/li&gt;`</span></span></span></span><br><span class="line"><span class="string"><span class="subst">      )</span></span></span><br><span class="line"><span class="string"><span class="subst">      .join(<span class="string">""</span>)&#125;</span></span></span><br><span class="line"><span class="string">&lt;/ul&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="built_in">console</span>.log(template);</span><br><span class="line"><span class="built_in">document</span>.body.innerHTML = template;</span><br></pre></td></tr></table></figure>
<p>根据以上例子，还可以将读取对象内容的代码封装成函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">renderTodos</span>(<span class="params">todos</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`&lt;ul&gt;</span></span><br><span class="line"><span class="string">        <span class="subst">$&#123;todos</span></span></span><br><span class="line"><span class="string"><span class="subst">          .map(</span></span></span><br><span class="line"><span class="string"><span class="subst">            todo =&gt; <span class="string">`</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">            &lt;li&gt;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">        <span class="subst">$&#123;todo.thing&#125;</span> <span class="subst">$&#123;todo.completed ? <span class="string">"(yes)"</span> : <span class="string">"(no)"</span>&#125;</span></span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">            &lt;/li&gt;`</span></span></span></span><br><span class="line"><span class="string"><span class="subst">          )</span></span></span><br><span class="line"><span class="string"><span class="subst">          .join(<span class="string">""</span>)&#125;</span></span></span><br><span class="line"><span class="string">    &lt;/ul&gt;`</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> template = <span class="string">`<span class="subst">$&#123;renderTodos(Alfred.todos)&#125;</span>`</span>;</span><br><span class="line"><span class="built_in">document</span>.body.innerHTML = template;</span><br></pre></td></tr></table></figure>
<h2 id="标签模版"><a href="#标签模版" class="headerlink" title="标签模版"></a>标签模版</h2><ul>
<li>即在模版字符串中添加标签，根据我们自定义的规则，返回我们想要的字符串</li>
<li>标签对应 js 里的一个函数名</li>
<li>使用标签模版字符串时，最后那个字符串返回的内容是由标签（函数）决定的</li>
<li>这个函数可以接受模版字符串作为参数，第一个参数为模版字符串里的普通字符，其后的参数是模版字符串里的变量</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//参数可以用逗号分隔一个一个写</span></span><br><span class="line"><span class="comment">//也可以用ES6中的剩余参数，values是一个数组，是又剩余的参数组成</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hightlight</span>(<span class="params">strings, ...values</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// debugger;//可以看到strings，values里有什么</span></span><br><span class="line">  <span class="keyword">const</span> hightlighted = values.map(</span><br><span class="line">    value =&gt; <span class="string">`&lt;span class='hightlight'&gt;<span class="subst">$&#123;value&#125;</span>&lt;/span&gt;`</span></span><br><span class="line">  ); <span class="comment">//遍历变量的数组，给变量加一个span标签和hightlight样式</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// console.log(hightlighted);</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//将普通字符和处理后的变量拼接在一起</span></span><br><span class="line">  <span class="keyword">let</span> str = <span class="string">""</span>;</span><br><span class="line">  <span class="comment">// strings.forEach((string, i) =&gt; &#123;str += `$&#123;string&#125;$&#123;hightlighted[i]&#125;`;&#125;);</span></span><br><span class="line">  <span class="comment">//由于strings里最后一个是空字符串，因此要改写，以免拼接后句子中出现underfined</span></span><br><span class="line">  strings.forEach(<span class="function">(<span class="params">string, i</span>) =&gt;</span> &#123;</span><br><span class="line">    str += <span class="string">`<span class="subst">$&#123;string&#125;</span><span class="subst">$&#123;hightlighted[i] || <span class="string">""</span>&#125;</span>`</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> user = <span class="string">"Alfred"</span>;</span><br><span class="line"><span class="keyword">const</span> topic = <span class="string">"Learn ES6"</span>;</span><br><span class="line"><span class="keyword">const</span> sentence = hightlight<span class="string">`<span class="subst">$&#123;user&#125;</span> has commented on your topic <span class="subst">$&#123;topic&#125;</span>`</span>;</span><br><span class="line"><span class="comment">//   console.log(sentence);</span></span><br><span class="line"><span class="built_in">document</span>.body.innerHTML = sentence;</span><br></pre></td></tr></table></figure>
<p>以上代码优化、简化：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hightlight</span>(<span class="params">strings, ...values</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> hightlighted = values.map(</span><br><span class="line">    value =&gt; <span class="string">`&lt;span class='hightlight'&gt;<span class="subst">$&#123;value&#125;</span>&lt;/span&gt;`</span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">//字符串拼接也可以改为,reduce</span></span><br><span class="line">  <span class="keyword">return</span> strings.reduce(</span><br><span class="line">    (prev, curr, i) =&gt; <span class="string">`<span class="subst">$&#123;prev&#125;</span><span class="subst">$&#123;curr&#125;</span><span class="subst">$&#123;hightlighted[i] || <span class="string">""</span>&#125;</span>`</span>,</span><br><span class="line">    <span class="string">""</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> user = <span class="string">"Alfred"</span>;</span><br><span class="line"><span class="keyword">const</span> topic = <span class="string">"Learn ES6"</span>;</span><br><span class="line"><span class="keyword">const</span> sentence = hightlight<span class="string">`<span class="subst">$&#123;user&#125;</span> has commented on your topic <span class="subst">$&#123;topic&#125;</span>`</span>;</span><br><span class="line"><span class="built_in">document</span>.body.innerHTML = sentence;</span><br></pre></td></tr></table></figure>
<p>注意：</p>
<ol>
<li>如果模版字符串是以变量开头或结尾的话，打印参数 strings，会看到里面有空字符串</li>
</ol>
<blockquote>
<p>forEach():<a href="https://www.runoob.com/jsref/jsref-foreach.html" target="_blank" rel="noopener">https://www.runoob.com/jsref/jsref-foreach.html</a><br>reduce():<a href="https://www.runoob.com/jsref/jsref-reduce.html" target="_blank" rel="noopener">https://www.runoob.com/jsref/jsref-reduce.html</a></p>
</blockquote>
<h3 id="最佳实践——过滤用户输入（防-xss-攻击）"><a href="#最佳实践——过滤用户输入（防-xss-攻击）" class="headerlink" title="最佳实践——过滤用户输入（防 xss 攻击）"></a>最佳实践——过滤用户输入（防 xss 攻击）</h3><ul>
<li>使用<a href="https://github.com/cure53/DOMPurify" target="_blank" rel="noopener">DOMPurify</a></li>
</ul>
<blockquote>
<p>更多关于标签模版的内容：<a href="https://www.cnblogs.com/sminocence/p/6832331.html" target="_blank" rel="noopener">https://www.cnblogs.com/sminocence/p/6832331.html</a></p>
</blockquote>
<h1 id="对象解构"><a href="#对象解构" class="headerlink" title="对象解构"></a>对象解构</h1><ol>
<li>简单用法</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Alfred = &#123;</span><br><span class="line">  name: <span class="string">"Alfred"</span>,</span><br><span class="line">  age: <span class="number">30</span>,</span><br><span class="line">  family: &#123;</span><br><span class="line">    mother: <span class="string">"one"</span>,</span><br><span class="line">    father: <span class="string">"two"</span>,</span><br><span class="line">    brother: <span class="string">"three"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// const name = ""; //下方声明了name和age变量，所以在它不能声明一样的变量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; name, age &#125; = Alfred;</span><br><span class="line"><span class="comment">//先声明变量name和age，然后在Tom中找和变量相同的同名属性，然后分别赋值</span></span><br><span class="line"><span class="built_in">console</span>.log(name, age);</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>如果还是想提前声明变量，可以使用大括号，见下方</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Alfred = &#123;</span><br><span class="line">  name: <span class="string">"Alfred"</span>,</span><br><span class="line">  age: <span class="number">30</span>,</span><br><span class="line">  family: &#123;</span><br><span class="line">    mother: <span class="string">"one"</span>,</span><br><span class="line">    father: <span class="string">"two"</span>,</span><br><span class="line">    brother: <span class="string">"three"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> name = <span class="string">""</span>;</span><br><span class="line">(&#123; name, age &#125; = Alfred);</span><br><span class="line"><span class="built_in">console</span>.log(name, age);</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>对象解构可以嵌套</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Alfred = &#123;</span><br><span class="line">  name: <span class="string">"Alfred"</span>,</span><br><span class="line">  age: <span class="number">30</span>,</span><br><span class="line">  family: &#123;</span><br><span class="line">    mother: <span class="string">"one"</span>,</span><br><span class="line">    father: <span class="string">"two"</span>,</span><br><span class="line">    brother: <span class="string">"three"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> &#123; father, mother, brother &#125; = Alfred.family;</span><br><span class="line"><span class="built_in">console</span>.log(father, mother, brother);</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>如果提前使用了一个同名变量,就要重命名</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Alfred = &#123;</span><br><span class="line">  name: <span class="string">"Alfred"</span>,</span><br><span class="line">  age: <span class="number">30</span>,</span><br><span class="line">  family: &#123;</span><br><span class="line">    mother: <span class="string">"one"</span>,</span><br><span class="line">    father: <span class="string">"two"</span>,</span><br><span class="line">    brother: <span class="string">"three"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> father = <span class="string">"Dad"</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">father</span>: F, mother, <span class="attr">brother</span>: b &#125; = Alfred.family; <span class="comment">//此处声明了的是重命名之后的变量，是先声明了f变量，再Alfred.family中找到属性名是father的值，赋值给f</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(father, F); <span class="comment">//Dad two</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(brother);//如果想要打印brother，会报错,Uncaught ReferenceError: brother is not defined</span></span><br></pre></td></tr></table></figure>
<ol start="5">
<li>如果要在对象中拿一个没有的变量，会返回 undefined</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Alfred = &#123;</span><br><span class="line">  name: <span class="string">"Alfred"</span>,</span><br><span class="line">  age: <span class="number">30</span>,</span><br><span class="line">  family: &#123;</span><br><span class="line">    mother: <span class="string">"one"</span>,</span><br><span class="line">    father: <span class="string">"two"</span>,</span><br><span class="line">    brother: <span class="string">"three"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> father = <span class="string">"Dad"</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">father</span>: F, mother, <span class="attr">brother</span>: b, sister &#125; = Alfred.family;</span><br><span class="line"><span class="built_in">console</span>.log(sister); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>通常，如果没有这个值，可以给定一个默认值，只要对象里没有这个值（即等于 undefined），或对象里该值就是 undefined 时，才使用这个默认值，否则都不会使用（0，false，null 也不使用默认值）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Alfred = &#123;</span><br><span class="line">  name: <span class="string">"Alfred"</span>,</span><br><span class="line">  age: <span class="number">30</span>,</span><br><span class="line">  family: &#123;</span><br><span class="line">    mother: <span class="string">"one"</span>,</span><br><span class="line">    father: <span class="string">"two"</span>,</span><br><span class="line">    brother: <span class="string">"three"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> father = <span class="string">"Dad"</span>;</span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  father: F,</span><br><span class="line">  mother,</span><br><span class="line">  brother: b,</span><br><span class="line">  sister = <span class="string">"have no sister"</span></span><br><span class="line">&#125; = Alfred.family;</span><br><span class="line"><span class="built_in">console</span>.log(sister); <span class="comment">//have no sister</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>这种使用默认值的场景在一些第三方库中非常常用</p>
</li>
</ul>
<h1 id="数组解构"><a href="#数组解构" class="headerlink" title="数组解构"></a>数组解构</h1><ol>
<li>简单用法</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>, <span class="string">"four"</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [a,b]=numbers;<span class="comment">//声明变量，可以获取相应位置的值</span></span><br><span class="line"><span class="built_in">console</span>.log(a,b);<span class="comment">//one two</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [m,,n]=numbers;<span class="comment">//想拿第一和三位置的值，就把中间的空出来</span></span><br><span class="line"><span class="built_in">console</span>.log(m,n);<span class="comment">//one three</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [j,...k]=numbers;<span class="comment">//想获取第一个和剩余的，使用Rest参数</span></span><br><span class="line"><span class="built_in">console</span>.log(j,k);<span class="comment">//one  ["two", "three", "four"]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [one,...two,three]=numbers;<span class="comment">//rest参数必须是数组的最后一个</span></span><br><span class="line"><span class="built_in">console</span>.log(two);<span class="comment">//报错</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>数组解构指定默认值</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> details = [<span class="string">"Alfred"</span>, <span class="literal">null</span>];</span><br><span class="line"><span class="keyword">const</span> [singerOne, singerTwo = <span class="string">"Jw"</span>, singerThree = <span class="string">"Raymond"</span>] = details;</span><br><span class="line"><span class="built_in">console</span>.log(singerOne, singerTwo, singerThree); <span class="comment">//Alfred null Raymond</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组中对应值为undefined，才使用默认值，为0，false，null不会使用默认值</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>常用场景</li>
</ol>
<ul>
<li>交换变量的值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">20</span>;</span><br><span class="line">[a, b] = [b, a];</span><br><span class="line"><span class="built_in">console</span>.log(a, b); <span class="comment">//20 10</span></span><br></pre></td></tr></table></figure>
<h1 id="for-of"><a href="#for-of" class="headerlink" title="for of"></a>for of</h1><blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Iteration_protocols" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Iteration_protocols</a></p>
</blockquote>
<ol>
<li>for of 循环可用于遍历可迭代对象</li>
<li><strong>可迭代对象</strong>：部署了<code>iterator</code>（迭代器/遍历器）的接口，或定义了<code>Symbol.iterator</code>方法的数据结构</li>
<li>遍历器可用于定义数据结构的遍历方式，js 给很多内置的数据结构提供了内置的遍历器接口</li>
<li>for of 循环不支持遍历对象</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sayhi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>[<span class="number">0</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> fruits = [<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"orange"</span>, <span class="string">"pear"</span>];</span><br><span class="line">fruits.hi = <span class="string">"hi"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// for (let i = 0; i &lt; fruits.length; i++) &#123;</span></span><br><span class="line"><span class="comment">//   console.log(fruits[i]);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// 繁琐，可读性不高</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// fruits.forEach(fruit=&gt;&#123;</span></span><br><span class="line"><span class="comment">//   console.log(fruit);</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"><span class="comment">//数组提供的forEach()方法，缺点是不能终止或者跳过，在forEach里面用break和continue都会报错</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// for (let fruit in fruits) &#123;</span></span><br><span class="line"><span class="comment">//   console.log(fruits[fruit]);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">//for in 循环的变量fruit，循环的是属性名</span></span><br><span class="line"><span class="comment">//for in遍历的是对象上所有的的可枚举属性，即使属性加在它的原型上也可以遍历到</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> fruit <span class="keyword">of</span> fruits) &#123;</span><br><span class="line">  <span class="keyword">if</span> (fruit === <span class="string">"banana"</span>) &#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    <span class="comment">//continue;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(fruit);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//for of循环中的变量fruit循环的是属性值，同时也不会遍历数组上的非数字属性，同时支持循环终止和跳过</span></span><br></pre></td></tr></table></figure>
<ol start="5">
<li>定义一个数组 fruits，在控制台输入<code>fruits.entries();</code>，可看到它的遍历器接口</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fruits = [<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"orange"</span>, <span class="string">"pear"</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> fruit <span class="keyword">of</span> fruits.entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(fruit);</span><br><span class="line">  <span class="comment">//可同时获取到元素的索引值和元素值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因此可以改写成</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fruits = [<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"orange"</span>, <span class="string">"pear"</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [index, fruit] <span class="keyword">of</span> fruits.entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;fruit&#125;</span> ranks <span class="subst">$&#123;index + <span class="number">1</span>&#125;</span> in my favorite fruits`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>用于其他数据结构的一些场景</li>
</ol>
<ul>
<li><p>遍历 arguments 对象来计算数组的和（注意：arguments 对象的原型是 Object）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> total = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">of</span> <span class="built_in">arguments</span>) &#123;</span><br><span class="line">    total += num;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(total);</span><br><span class="line">  <span class="keyword">return</span> total;</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>应用于字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">"Alfred"</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> char <span class="keyword">of</span> name) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(char);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>用于获取 NodeList，我们经常需要获取一些 dom 集合，用于操作里面的元素</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>one<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>two<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>three<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>four<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>five<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.completed</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: line-through;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = <span class="built_in">document</span>.querySelectorAll(<span class="string">"li"</span>);</span><br><span class="line"><span class="comment">// console.log(list);</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> li <span class="keyword">of</span> list) &#123;</span><br><span class="line">  li.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.classList.toggle(<span class="string">"completed"</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="ES6-新增的字符串函数"><a href="#ES6-新增的字符串函数" class="headerlink" title="ES6 新增的字符串函数"></a>ES6 新增的字符串函数</h1><h2 id="startsWith"><a href="#startsWith" class="headerlink" title=".startsWith()"></a>.startsWith()</h2><ul>
<li>是否（从第 n 位开始）以’xx’字符串开头</li>
<li>区分大小写</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = <span class="string">"881208Alfred"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(num.startsWith(<span class="string">"88"</span>)); <span class="comment">//true,是否以'88'开头</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num.startsWith(<span class="string">"1208"</span>, <span class="number">1</span>)); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(num.startsWith(<span class="string">"1208"</span>, <span class="number">2</span>)); <span class="comment">//true，从第三位开始是不是'1208'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num.startsWith(<span class="string">"A"</span>, <span class="number">6</span>)); <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(num.startsWith(<span class="string">"a"</span>, <span class="number">6</span>)); <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<h2 id="endsWith"><a href="#endsWith" class="headerlink" title=".endsWith()"></a>.endsWith()</h2><ul>
<li>是否以’xx’字符串结尾</li>
<li>使用与 startsWith 相似</li>
<li>区分大小写<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(num.endsWith(<span class="string">"ed"</span>)); <span class="comment">//true,是否以'es'结尾</span></span><br><span class="line"><span class="built_in">console</span>.log(num.endsWith(<span class="string">"1208"</span>, <span class="number">6</span>)); <span class="comment">//true，注意6是1208中8的下标后一位</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num.endsWith(<span class="string">"A"</span>, <span class="number">7</span>)); <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(num.endsWith(<span class="string">"a"</span>, <span class="number">7</span>)); <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="includes"><a href="#includes" class="headerlink" title=".includes()"></a>.includes()</h2><ul>
<li>‘xx’字符串是否包含在原字符串里<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sentence = <span class="string">"Alfred loves his father"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(sentence.indexOf(<span class="string">"is"</span>) !== <span class="number">-1</span>); <span class="comment">//ES5，is字符串存在在sentence内</span></span><br><span class="line"><span class="built_in">console</span>.log(sentence.includes(<span class="string">"is"</span>)); <span class="comment">//ES6，true</span></span><br><span class="line"><span class="built_in">console</span>.log(sentence.includes(<span class="string">"is"</span>, <span class="number">14</span>)); <span class="comment">//true，从下标为14位及之后是否存在is</span></span><br><span class="line"><span class="built_in">console</span>.log(sentence.includes(<span class="string">"is"</span>, <span class="number">15</span>)); <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="repeat"><a href="#repeat" class="headerlink" title=".repeat()"></a>.repeat()</h2><ul>
<li>让某字符串重复 n 次<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sentence = <span class="string">"Alfred loves his father"</span>;</span><br><span class="line"><span class="keyword">const</span> sentence2 = <span class="string">"I love programing"</span>;</span><br><span class="line"><span class="keyword">const</span> title = <span class="string">`<span class="subst">$&#123;<span class="string">"哈"</span>.repeat(<span class="number">3</span>)&#125;</span> <span class="subst">$&#123;sentence&#125;</span> <span class="subst">$&#123;<span class="string">"喽"</span>.repeat(<span class="number">3</span>)&#125;</span>`</span>;</span><br><span class="line"><span class="built_in">console</span>.log(title); <span class="comment">//哈哈哈 Alfred loves his father 喽喽喽</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//字符串右对齐</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">padder</span>(<span class="params">string, length = <span class="number">25</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="string">" "</span>.repeat(<span class="built_in">Math</span>.max(length - string.length, <span class="number">0</span>))&#125;</span><span class="subst">$&#123;string&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(padder(sentence));</span><br><span class="line"><span class="built_in">console</span>.log(padder(sentence2));</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="ES6-为数组提供的新方法"><a href="#ES6-为数组提供的新方法" class="headerlink" title="ES6 为数组提供的新方法"></a>ES6 为数组提供的新方法</h1><h2 id="Array-from"><a href="#Array-from" class="headerlink" title="Array.from()"></a>Array.from()</h2><ol>
<li><code>Array.from()</code>用于把一个类数组对象/可遍历对象转换为一个数组<ul>
<li>类数组对象是拥有 length 属性的对象</li>
<li>可遍历对象即可迭代对象(for of 处有相关描述)</li>
</ul>
</li>
<li>from()不是数组原型上的方法</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = [];</span><br><span class="line">num.from(); <span class="comment">//报错</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.from(num); <span class="comment">//正确调用</span></span><br></pre></td></tr></table></figure>
<p>简单运用：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>one<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>two<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>three<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> todos = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"li"</span>);</span><br><span class="line"><span class="keyword">const</span> num = todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> todo.innerHTML); <span class="comment">//todos.map is not a function</span></span><br><span class="line"><span class="built_in">console</span>.log(num);</span><br><span class="line"></span><br><span class="line"><span class="comment">//因为todo不是数组，只是类数组对象，所以没有map方法</span></span><br></pre></td></tr></table></figure>
<p>要改成</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> todos = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"li"</span>);</span><br><span class="line"><span class="keyword">const</span> num = <span class="built_in">Array</span>.from(todos); <span class="comment">//将类数组对象转换为数组</span></span><br><span class="line"><span class="keyword">const</span> nums = num.map(<span class="function"><span class="params">todo</span> =&gt;</span> todo.innerHTML);</span><br><span class="line"><span class="built_in">console</span>.log(nums);</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>Array.from()可传入第二个参数，是一个函数，相当于数组的 map 方法，会对转化成数组的每个元素执行相对应的函数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> todos = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"li"</span>);</span><br><span class="line"><span class="keyword">const</span> nums = <span class="built_in">Array</span>.from(todos, todo =&gt; todo.innerHTML);</span><br><span class="line"><span class="built_in">console</span>.log(nums);</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>可将函数里的 arguments 这个类数组对象转换为数组</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">arguments</span>.reduce(<span class="function">(<span class="params">prev, curr</span>) =&gt;</span> prev + curr, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">//报错</span></span><br></pre></td></tr></table></figure>
<p>改成</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="built_in">arguments</span>).reduce(<span class="function">(<span class="params">prev, curr</span>) =&gt;</span> prev + curr);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">//3</span></span><br></pre></td></tr></table></figure>
<h2 id="Array-of"><a href="#Array-of" class="headerlink" title="Array.of()"></a>Array.of()</h2><ol>
<li><code>Array.of()</code>用于弥补 Array 这个构造函数的不足</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>)); <span class="comment">//length为1的空数组</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">7</span>)); <span class="comment">//length为7的空数组</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">//[1,2]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.of(<span class="number">2</span>)); <span class="comment">//[2]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.of(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">//[1,2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Array.of()解决了Array构造函数因传参个数不同而造成的的不一致</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>of()不是数组原型上的方法</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = [];</span><br><span class="line">num.of(); <span class="comment">//报错</span></span><br></pre></td></tr></table></figure>
<h1 id="ES6-中数组的新方法"><a href="#ES6-中数组的新方法" class="headerlink" title="ES6 中数组的新方法"></a>ES6 中数组的新方法</h1><h2 id="find"><a href="#find" class="headerlink" title=".find()"></a>.find()</h2><ol>
<li>用于寻找数组里的某个满足条件的元素</li>
<li>接受一个函数作为参数<ul>
<li>函数可接受三个参数，后两个为可选<code>inventory.find(element,index,array)</code></li>
</ul>
</li>
<li>当找到一个符合要求的元素就立刻返回</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> inventory = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"apple"</span>, <span class="attr">quantity</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"banana"</span>, <span class="attr">quantity</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"pear"</span>, <span class="attr">quantity</span>: <span class="number">3</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bananas = inventory.find(<span class="function"><span class="params">fruit</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(fruit); <span class="comment">//可见，执行到第一个满足条件的元素处就停止执行了</span></span><br><span class="line">  <span class="keyword">if</span> (fruit.name === <span class="string">"banana"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(bananas);</span><br></pre></td></tr></table></figure>
<p>简化为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> inventory = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"apple"</span>, <span class="attr">quantity</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"banana"</span>, <span class="attr">quantity</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"pear"</span>, <span class="attr">quantity</span>: <span class="number">3</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bananas = inventory.find(<span class="function"><span class="params">fruit</span> =&gt;</span> fruit.name === <span class="string">"banana"</span>); <span class="comment">//&#123;name: "banana", quantity: 2&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(bananas);</span><br></pre></td></tr></table></figure>
<h2 id="findIndex"><a href="#findIndex" class="headerlink" title=".findIndex()"></a>.findIndex()</h2><ol>
<li>找到数组中某个元素的索引</li>
<li>接受一个函数作为参数<ul>
<li>函数可接受三个参数，后两个为可选<code>inventory.findIndex(element,index,array)</code></li>
</ul>
</li>
<li>返回第一个找到的元素的索引</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> inventory = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"apple"</span>, <span class="attr">quantity</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"banana"</span>, <span class="attr">quantity</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"banana"</span>, <span class="attr">quantity</span>: <span class="number">3</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bananaIndex = inventory.findIndex(<span class="function"><span class="params">fruit</span> =&gt;</span> fruit.name === <span class="string">"banana"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(bananaIndex); <span class="comment">//1</span></span><br></pre></td></tr></table></figure>
<h2 id="some"><a href="#some" class="headerlink" title=".some()"></a>.some()</h2><ol>
<li>接受一个函数作为参数，返回布尔值</li>
<li>若数组中某个元素满足了测试函数，就返回 true 并且停止执行</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> inventory = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"apple"</span>, <span class="attr">quantity</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"banana"</span>, <span class="attr">quantity</span>: <span class="number">0</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"pear"</span>, <span class="attr">quantity</span>: <span class="number">3</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isEnough = inventory.some(<span class="function"><span class="params">fruit</span> =&gt;</span> fruit.quantity &gt; <span class="number">0</span>); <span class="comment">//水果是否还有库存？</span></span><br><span class="line"><span class="built_in">console</span>.log(isEnough); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<h2 id="every"><a href="#every" class="headerlink" title=".every()"></a>.every()</h2><ol>
<li>接受一个函数作为参数，返回布尔值</li>
<li>只有当所有元素都满足测试函数，才会返回 true，否则，遇到第一个条件是 false 的元素就会立即返回并停止执行</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> inventory = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"apple"</span>, <span class="attr">quantity</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"banana"</span>, <span class="attr">quantity</span>: <span class="number">0</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"pear"</span>, <span class="attr">quantity</span>: <span class="number">3</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isAllEnough = inventory.every(<span class="function"><span class="params">fruit</span> =&gt;</span> fruit.quantity &gt; <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(isAllEnough); <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<h1 id="剩余参数"><a href="#剩余参数" class="headerlink" title="剩余参数"></a>剩余参数</h1><ol>
<li>剩余参数只能用于参数的最后一个，不能是中间</li>
<li>还可用于<a href="#数组解构">解构</a><br>直接看一些例子来理解用法吧</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">...numbers</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(numbers); <span class="comment">//数组[1,2,3]</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>); <span class="comment">//类数组对象</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> numbers.reduce(<span class="function">(<span class="params">prev, curr</span>) =&gt;</span> prev + curr, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)); <span class="comment">//6</span></span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)); <span class="comment">//10</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">converCurrency</span>(<span class="params">rate, ...amounts</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> amounts.map(<span class="function"><span class="params">amount</span> =&gt;</span> amount * rate);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> amounts = converCurrency(<span class="number">0.8</span>, <span class="number">12</span>, <span class="number">34</span>, <span class="number">656</span>, <span class="number">23</span>);</span><br><span class="line"><span class="built_in">console</span>.log(amounts);</span><br></pre></td></tr></table></figure>
<h1 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h1><ol>
<li>剩余参数是把很多参数整合成数组，而扩展运算符则是把一个可遍历对象的每个元素扩展为一个新的参数序列。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log([...<span class="string">"Alfred"</span>]); <span class="comment">//["A", "l", "f", "r", "e", "d"]</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>来看一个例子：想在把两个数组连接起来，并在两个数组之间添加一个 Raymond</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> actor = [<span class="string">"Jhon"</span>, <span class="string">"Thomas"</span>];</span><br><span class="line"><span class="keyword">const</span> singers = [<span class="string">"Greyson"</span>, <span class="string">"Alfred"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//ES5方法</span></span><br><span class="line"><span class="comment">// let members = [];</span></span><br><span class="line"><span class="comment">// members = members.concat(actor);</span></span><br><span class="line"><span class="comment">// members.push("Raymond");</span></span><br><span class="line"><span class="comment">// members = members.concat(singers);</span></span><br><span class="line"><span class="comment">// console.log(members);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ES6方法</span></span><br><span class="line"><span class="keyword">const</span> members = [...actor, <span class="string">"Raymond"</span>, ...singers];</span><br><span class="line"><span class="built_in">console</span>.log(members);</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>再来看一种情况</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> actor = [<span class="string">"Jhon"</span>, <span class="string">"Thomas"</span>];</span><br><span class="line"><span class="keyword">const</span> singers = [<span class="string">"Greyson"</span>, <span class="string">"Alfred"</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> members = [...actor, <span class="string">"Raymond"</span>, ...singers];</span><br><span class="line"><span class="keyword">const</span> currentMembers = members;</span><br><span class="line">currentMembers[<span class="number">0</span>] = <span class="string">"nobody"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(currentMembers);</span><br><span class="line"><span class="built_in">console</span>.log(members);</span><br><span class="line"><span class="comment">//["nobody", "Thomas", "Raymond", "Greyson", "Alfred"]</span></span><br><span class="line"><span class="comment">//此时members和currentMembers的第一个元素均改变了，因为currentMembers中保存的是指向members的索引。</span></span><br></pre></td></tr></table></figure>
<p>ES5 中常见解决方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> actor = [<span class="string">"Jhon"</span>, <span class="string">"Thomas"</span>];</span><br><span class="line"><span class="keyword">const</span> singers = [<span class="string">"Greyson"</span>, <span class="string">"Alfred"</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> members = [...actor, <span class="string">"Raymond"</span>, ...singers];</span><br><span class="line"><span class="keyword">const</span> currentMembers = [].concat(members);</span><br><span class="line">currentMembers[<span class="number">0</span>] = <span class="string">"nobody"</span>;</span><br></pre></td></tr></table></figure>
<p>运用扩展运算符解决：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> actor = [<span class="string">"Jhon"</span>, <span class="string">"Thomas"</span>];</span><br><span class="line"><span class="keyword">const</span> singers = [<span class="string">"Greyson"</span>, <span class="string">"Alfred"</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> members = [...actor, <span class="string">"Raymond"</span>, ...singers];</span><br><span class="line"><span class="keyword">const</span> currentMembers = [...members];</span><br><span class="line">currentMembers[<span class="number">0</span>] = <span class="string">"nobody"</span>;</span><br></pre></td></tr></table></figure>
<h2 id="其他运用场景"><a href="#其他运用场景" class="headerlink" title="其他运用场景"></a>其他运用场景</h2><ol>
<li>代替<a href="#Array.from(">Array.from</a>&gt;)</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//因document.getElementsByTagName("li")的原型不是数组，因此没有map方法</span></span><br><span class="line"><span class="comment">// const todos = Array.from(document.getElementsByTagName("li"));</span></span><br><span class="line"><span class="comment">//除了使用Array.from，还可以用扩展运算符</span></span><br><span class="line"><span class="keyword">const</span> todos = [...document.getElementsByTagName(<span class="string">"li"</span>)];</span><br><span class="line"><span class="keyword">const</span> nums = todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> todo.innerHTML);</span><br><span class="line"><span class="built_in">console</span>.log(nums);</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>扩展对象的属性</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> favorites = &#123;</span><br><span class="line">  color: [<span class="string">"blue"</span>, <span class="string">"yellow"</span>],</span><br><span class="line">  fruits: [<span class="string">"banana"</span>, <span class="string">"apple"</span>]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> shoppingList = [<span class="string">"milk"</span>, <span class="string">"sweets"</span>, ...favorites.fruits];</span><br><span class="line"><span class="built_in">console</span>.log(shoppingList); <span class="comment">//["milk", "sweets", "banana", "apple"]</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>数组中删除对象元素</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//想要删除数组中id为2的对象</span></span><br><span class="line"><span class="keyword">const</span> todos = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">"Raymond"</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">"Alfred"</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">"Greyson"</span> &#125;</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> deleteIndex = todos.findIndex(<span class="function"><span class="params">todo</span> =&gt;</span> todo.id === <span class="number">2</span>);</span><br><span class="line"><span class="comment">// const newTodos=[todos.slice(0,deleteIndex),todos.slice(deleteIndex+1)];</span></span><br><span class="line"><span class="comment">// 因为todos.slice(0,deleteIndex)和todos.slice(deleteIndex+1)是两个数组，而我们一般希望能以对象的方式重新保存到数组里，因此可用扩展运算符</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newTodos = [</span><br><span class="line">  ...todos.slice(<span class="number">0</span>, deleteIndex),</span><br><span class="line">  ...todos.slice(deleteIndex + <span class="number">1</span>)</span><br><span class="line">]; <span class="comment">//将原来数组里的每一项直接放进新的数组</span></span><br><span class="line"><span class="built_in">console</span>.log(newTodos);</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>在函数中的应用</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将singers的元素push到actor中</span></span><br><span class="line"><span class="keyword">const</span> actors = [<span class="string">"Jhon"</span>, <span class="string">"Thomas"</span>];</span><br><span class="line"><span class="keyword">const</span> singers = [<span class="string">"Greyson"</span>, <span class="string">"Alfred"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//ES5</span></span><br><span class="line"><span class="comment">// actors.push(singers);//这样写，最后actors成了二维数组，并不是我们想要的效果</span></span><br><span class="line">actors.push.apply(actors, singers);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ES6</span></span><br><span class="line">actors.push(...singers);</span><br><span class="line"><span class="built_in">console</span>.log(actors);</span><br></pre></td></tr></table></figure>
<ul>
<li>减轻我们一个一个传入参数的痛苦</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dateFields = [<span class="number">2019</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">20</span>, <span class="number">20</span>];</span><br><span class="line"><span class="keyword">const</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(...dateFields);</span><br><span class="line"><span class="built_in">console</span>.log(date); <span class="comment">//注意月份是从0开始算的</span></span><br></pre></td></tr></table></figure>
<h1 id="对象字面量的改进"><a href="#对象字面量的改进" class="headerlink" title="对象字面量的改进"></a>对象字面量的改进</h1><ul>
<li>简化书写</li>
</ul>
<ol>
<li>当对象内的属性名和对象外的变量名一样时，对象内可简化书写</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">"Raymond"</span>;</span><br><span class="line"><span class="keyword">const</span> age = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> birthday = <span class="string">"2018-01-01"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ES5</span></span><br><span class="line"><span class="keyword">const</span> Raymond = &#123;</span><br><span class="line">  name: name,</span><br><span class="line">  age: age,</span><br><span class="line">  birthday: birthday</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ES6</span></span><br><span class="line"><span class="keyword">const</span> raymond = &#123;</span><br><span class="line">  name,</span><br><span class="line">  age,</span><br><span class="line">  birthday</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//需要导出方法时也一样</span></span><br><span class="line"><span class="comment">// module.exports=&#123;</span></span><br><span class="line"><span class="comment">//     gatName,</span></span><br><span class="line"><span class="comment">//     getAge</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>在对象内定义方法时可以简写</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ES5</span></span><br><span class="line"><span class="keyword">const</span> Raymond = &#123;</span><br><span class="line">  name: name,</span><br><span class="line">  age: age,</span><br><span class="line">  birthday: birthday,</span><br><span class="line">  greet: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">"Hello"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ES6</span></span><br><span class="line"><span class="keyword">const</span> raymond = &#123;</span><br><span class="line">  name,</span><br><span class="line">  age,</span><br><span class="line">  birthday,</span><br><span class="line">  greet() &#123;</span><br><span class="line">    alert(<span class="string">"Hello"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>ES6 提供了计算属性</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> id = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> userIds = &#123;</span><br><span class="line">  [<span class="string">`user-<span class="subst">$&#123;++id&#125;</span>`</span>]: id,</span><br><span class="line">  [<span class="string">`user-<span class="subst">$&#123;++id&#125;</span>`</span>]: id,</span><br><span class="line">  [<span class="string">`user-<span class="subst">$&#123;++id&#125;</span>`</span>]: id</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(userIds);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> keys = [<span class="string">"name"</span>, <span class="string">"age"</span>, <span class="string">"birthday"</span>];</span><br><span class="line"><span class="keyword">const</span> values = [<span class="string">"Raymond"</span>, <span class="string">"2"</span>, <span class="string">"2017-01-01"</span>];</span><br><span class="line"><span class="keyword">const</span> Raymond = &#123;</span><br><span class="line">  [keys.shift()]: values.shift(),</span><br><span class="line">  [keys.shift()]: values.shift(),</span><br><span class="line">  [keys.shift()]: values.shift()</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(Raymond);</span><br></pre></td></tr></table></figure>
<h1 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h1><ul>
<li>在向服务器发起请求时，经常会有这样的需求，就是第一个请求成功后再发起第二个请求，第二个成功后再发起第三个，而为了实现，通常会把第二个请求放在第一个请求的回调函数中，第三个请求则放在第二个请求的回调函数中。</li>
<li>弊端：这样写，随着相关的依赖越来越多，代码嵌套程度越来越深，代码越来越难看，这样很可能会陷入回调地狱（函数作为参数层层嵌套）中。<blockquote>
<p>其他资料：<a href="https://www.jianshu.com/p/39adf6ab8ad1" target="_blank" rel="noopener">https://www.jianshu.com/p/39adf6ab8ad1</a></p>
</blockquote>
</li>
</ul>
<h2 id="axios（promise-库）"><a href="#axios（promise-库）" class="headerlink" title="axios（promise 库）"></a>axios（promise 库）</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> userName;</span><br><span class="line"><span class="keyword">const</span> usersPromise = axios.get(<span class="string">"https://api.github.com/users"</span>);</span><br><span class="line">usersPromise</span><br><span class="line">  .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response);</span><br><span class="line">    userName = response.data[<span class="number">0</span>].login;</span><br><span class="line">    <span class="keyword">return</span> axios.get(<span class="string">`https://api.github.com/users/<span class="subst">$&#123;userName&#125;</span>/repos`</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res.data);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>them 相当于一个监听</li>
<li>catch 用于监听错误的发生，用了 catch，发生错误时会告诉你发生了错误，没用，则会反馈说 Uncaught Error</li>
</ul>
<h2 id="编写一个简单的-promise"><a href="#编写一个简单的-promise" class="headerlink" title="编写一个简单的 promise"></a>编写一个简单的 promise</h2><ul>
<li>Promise 构造函数的参数是一个函数，这个函数有两个内置参数 resolve，reject</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">"success"</span>); <span class="comment">//成功就立即返回success</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听这个promise</span></span><br><span class="line">p.then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;); <span class="comment">//打印返回的数据</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="built_in">Error</span>(<span class="string">"failed"</span>)); <span class="comment">//此处加Error()可以指明错误发生在这行</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听这个promise</span></span><br><span class="line">p.then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.error(err);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//不用catch会报Uncaught (in promise) failed</span></span><br></pre></td></tr></table></figure>
<h2 id="处理多个-Promise"><a href="#处理多个-Promise" class="headerlink" title="处理多个 Promise"></a>处理多个 Promise</h2><ul>
<li>.all 方法，只有传入的所有 promise 结果都是 resolve，才会触发 then，只要有一个 promise 的结果是 reject，就会执行 catch</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> usersPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    resolve([<span class="string">"uOne"</span>, <span class="string">"uTwo"</span>]);</span><br><span class="line">  &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> moviePromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// resolve([&#123; name: "hi", rating: 9.2 &#125;]);</span></span><br><span class="line">    reject(<span class="built_in">Error</span>(<span class="string">"failed"</span>));</span><br><span class="line">  &#125;, <span class="number">500</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Promise</span>.all([usersPromise, moviePromise])</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res); <span class="comment">//结果的数组与传入的数组顺序一样</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>.race 方法的状态由第一个<strong>返回</strong>的 promise 决定，第一个返回的 promise 结果是什么，那么整个 Promise.race 的结果就是什么，第一个返回的 promise 是 resolve，就执行.then，否则执行 catch</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> usersPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    resolve([<span class="string">"uOne"</span>, <span class="string">"uTwo"</span>]);</span><br><span class="line">  &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> moviePromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    reject(<span class="built_in">Error</span>(<span class="string">"failed"</span>));</span><br><span class="line">  &#125;, <span class="number">500</span>); <span class="comment">//此处时间较短，先返回moviePromise</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Promise</span>.race([usersPromise, moviePromise])</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res); <span class="comment">//结果的数组与传入的数组顺序一样</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">//最后结果Error: failed，因为第一个返回的结果是moviePromise</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> usersPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    reject(<span class="built_in">Error</span>(<span class="string">"failed"</span>));</span><br><span class="line">  &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> moviePromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    resolve([&#123; <span class="attr">name</span>: <span class="string">"hi"</span>, <span class="attr">rating</span>: <span class="number">9.2</span> &#125;]);</span><br><span class="line">  &#125;, <span class="number">500</span>); <span class="comment">//此处时间较短，先返回moviePromise</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Promise</span>.race([usersPromise, moviePromise])</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res); <span class="comment">//结果的数组与传入的数组顺序一样</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">//最后结果打印了moviePromise返回的结果</span></span><br></pre></td></tr></table></figure>
<h1 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h1><p>来看一下这样一种情景</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> classRoom = &#123;</span><br><span class="line">  Alfred: &#123; <span class="attr">grade</span>: <span class="number">80</span>, <span class="attr">gender</span>: <span class="string">"male"</span> &#125;,</span><br><span class="line">  Raymond: &#123; <span class="attr">grade</span>: <span class="number">100</span>, <span class="attr">gender</span>: <span class="string">"male"</span> &#125;,</span><br><span class="line">  Raymond: &#123; <span class="attr">grade</span>: <span class="number">150</span>, <span class="attr">gender</span>: <span class="string">"male"</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(classRoom);</span><br><span class="line"><span class="comment">//由于两个Raymond的属性名重复，因此后面那个会覆盖前面的一个</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ES6 中的新数据类型</li>
<li>Symbol 用于生成唯一的标志符来避免命名冲突，每个 symbol 都是不一样的</li>
<li>typeof 可判断一个变量是不是 Symbol 类型</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> greyson = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">const</span> student = <span class="built_in">Symbol</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(greyson); <span class="comment">//Symbol()</span></span><br><span class="line"><span class="built_in">console</span>.log(student); <span class="comment">//Symbol()</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> greyson, <span class="keyword">typeof</span> student); <span class="comment">//symbol symbol</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(greyson == student); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(greyson === student); <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<ul>
<li>为了更好的调试，可以在定义 symbol 时添加描述</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> greyson = <span class="built_in">Symbol</span>(<span class="string">"greyson"</span>);</span><br><span class="line"><span class="keyword">const</span> student = <span class="built_in">Symbol</span>(<span class="string">"student"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(greyson); <span class="comment">//Symbol(greyson)</span></span><br><span class="line"><span class="built_in">console</span>.log(student); <span class="comment">//Symbol(student)</span></span><br></pre></td></tr></table></figure>
<p>因此，上方的情景可以改写为</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> classRoom = &#123;</span><br><span class="line">  [<span class="built_in">Symbol</span>(<span class="string">"Alfred"</span>)]: &#123; <span class="attr">grade</span>: <span class="number">80</span>, <span class="attr">gender</span>: <span class="string">"male"</span> &#125;,</span><br><span class="line">  [<span class="built_in">Symbol</span>(<span class="string">"Raymond"</span>)]: &#123; <span class="attr">grade</span>: <span class="number">100</span>, <span class="attr">gender</span>: <span class="string">"male"</span> &#125;,</span><br><span class="line">  [<span class="built_in">Symbol</span>(<span class="string">"Raymond"</span>)]: &#123; <span class="attr">grade</span>: <span class="number">150</span>, <span class="attr">gender</span>: <span class="string">"male"</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(classRoom);</span><br></pre></td></tr></table></figure>
<ul>
<li>用 Symbol 定义的属性不能遍历，因此可以用它作为私有属性，在对象内部使用</li>
<li>可用<code>Object.getOwnPropertySymbols()</code>来访问</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> classRoom = &#123;</span><br><span class="line">  [<span class="built_in">Symbol</span>(<span class="string">"Alfred"</span>)]: &#123; <span class="attr">grade</span>: <span class="number">80</span>, <span class="attr">gender</span>: <span class="string">"male"</span> &#125;,</span><br><span class="line">  [<span class="built_in">Symbol</span>(<span class="string">"Raymond"</span>)]: &#123; <span class="attr">grade</span>: <span class="number">100</span>, <span class="attr">gender</span>: <span class="string">"male"</span> &#125;,</span><br><span class="line">  [<span class="built_in">Symbol</span>(<span class="string">"Raymond"</span>)]: &#123; <span class="attr">grade</span>: <span class="number">150</span>, <span class="attr">gender</span>: <span class="string">"male"</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> classRoom) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key); <span class="comment">//什么都没打印</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(classRoom)); <span class="comment">//空数组</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyNames(classRoom)); <span class="comment">//空数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//正确打印classRoom</span></span><br><span class="line"><span class="keyword">const</span> syms = <span class="built_in">Object</span>.getOwnPropertySymbols(classRoom);</span><br><span class="line"><span class="built_in">console</span>.log(syms);</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取属性值</span></span><br><span class="line"><span class="keyword">const</span> syms2 = <span class="built_in">Object</span>.getOwnPropertySymbols(classRoom).map(</span><br><span class="line">  sym =&gt; classRoom[sym]</span><br><span class="line">);</span><br><span class="line"><span class="built_in">console</span>.log(syms2);</span><br></pre></td></tr></table></figure>
<ul>
<li>注意：获取属性值处必须使用<code>[]</code>,如果使用<code>.</code>访问，sym 代表的 Symbol 会被当成字符串，就等同于使用了<code>classRoom[&#39;sym&#39;]</code>，最终结果返回的值都是 undefined</li>
</ul>
<h1 id="模块（Modules）"><a href="#模块（Modules）" class="headerlink" title="模块（Modules）"></a>模块（Modules）</h1><p>在过去，我们要把代码模块化的时候，可能需要很多 script 标签，如果引用很多模块的话，一方面会影响访问的速度，另一方面还会定义很多全局变量，可能会导致命名冲突</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;h1&gt;Hello,world&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">  &lt;script src="user.js"&gt;&lt;/</span>script&gt;</span><br><span class="line">  &lt;script src=<span class="string">"stores.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>为了结局这一问题 ES6 给我们提供了一个模块机制。</strong></p>
<ol>
<li>一个模块可以拥有很多变量/函数/类</li>
<li>可以通过 export 命令导出它们</li>
<li>可以在其他文件中通过 import 命令来引用它们，然后在自己的代码当中使用</li>
</ol>
<p><strong>a.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//默认导出</span></span><br><span class="line"><span class="keyword">const</span> apiKey = <span class="string">"abc123"</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> apiKey;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//命名导出</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> apiKey = <span class="string">"abc123"</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> age = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">hi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"hi"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> apiKey = <span class="string">"abc123"</span>;</span><br><span class="line"><span class="keyword">const</span> age = <span class="number">12</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"hi"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123; apiKey <span class="keyword">as</span> Key, age, greet &#125;;</span><br><span class="line"><span class="comment">//as可以将apiKey命名外另外的你想要导出的名字，引入时要使用as后的名字</span></span><br></pre></td></tr></table></figure>
<p><strong>b.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用默认导出时</span></span><br><span class="line"><span class="keyword">import</span> apiKey <span class="keyword">from</span> <span class="string">"./a.js"</span>; <span class="comment">//这里apiKey是自己命名的，可以修改</span></span><br><span class="line"><span class="built_in">console</span>.log(apiKey); <span class="comment">//abc123</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; apiKey, age &#125; <span class="keyword">from</span> <span class="string">"./a.js"</span>;</span><br></pre></td></tr></table></figure>
<p>当引入的变量名和模块里已有的变量名冲突的话，可以使用 as 重命名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Key <span class="keyword">as</span> apiKey, age &#125; <span class="keyword">from</span> <span class="string">"./a.js"</span>;</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong></p>
<ol>
<li>一个模块中只能有一个默认导出</li>
<li>使用默认导出的话，在导入时可以随意命名</li>
<li>使用命名导出的话，在导入时必须使用导出时的名字，且要用大括号引入</li>
</ol>
<hr>
<p>app.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入其他包的方法或变量</span></span><br><span class="line"><span class="keyword">import</span> &#123; uniq &#125; <span class="keyword">from</span> <span class="string">"lodash"</span>; <span class="comment">//引用lodash里面的uniq方法，这种是命名导出</span></span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">"moment"</span>; <span class="comment">//导入默认的信息</span></span><br></pre></td></tr></table></figure>
<p>index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello,world<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./app.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong></p>
<ol>
<li>目前浏览器还在完善 ES6 模块的定义，因此目前不能直接在浏览器中使用它，而是需要通过 webpack、gulp 这样一些打包工具来处理。</li>
<li>Babel 可以帮我们把 ES6 代码转换成 ES5 代码，以保证一些还没有完善 ES6 的浏览器能够使用</li>
</ol>
<h1 id="class-继承语法糖"><a href="#class-继承语法糖" class="headerlink" title="class 继承语法糖"></a>class 继承语法糖</h1><h2 id="原型继承"><a href="#原型继承" class="headerlink" title="原型继承"></a>原型继承</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">User</span>(<span class="params">name, email</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.email = email;</span><br><span class="line">&#125;</span><br><span class="line">User.prototype.info = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Hi.I'm <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> Alfred = <span class="keyword">new</span> User(<span class="string">"Alfred"</span>, <span class="string">"hi@qq.com"</span>);</span><br><span class="line"><span class="keyword">const</span> Raymond = <span class="keyword">new</span> User(<span class="string">"Raymond"</span>, <span class="string">"hi2@qq.com"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//实例化之后重写原型对象属性</span></span><br><span class="line">User.prototype.info = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Hi.I'm <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>,my email is <span class="subst">$&#123;<span class="keyword">this</span>.email&#125;</span>`</span>);</span><br><span class="line">&#125;;</span><br><span class="line">User.prototype.description = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"hi"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Alfred);</span><br></pre></td></tr></table></figure>
<h2 id="class-语法"><a href="#class-语法" class="headerlink" title="class 语法"></a>class 语法</h2><ol>
<li>类的声明</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  <span class="comment">//这个类的内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>类的表达式</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> User = <span class="class"><span class="keyword">class</span> </span>&#123;</span><br><span class="line">  <span class="comment">//这个类的内容</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>类是特殊的函数，但不会提升，不能在类的定义之前调用</li>
<li>ES6 的 class 中，两个方法之间<strong>不能</strong>添加逗号分隔</li>
<li>类的静态方法（static 方法）只能通过类名调用，不能通过实例调用</li>
<li>class 内可以定义一个属性的 get 和 set 方法</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> User = <span class="class"><span class="keyword">class</span> </span>&#123;</span><br><span class="line">  <span class="comment">//类的构造函数</span></span><br><span class="line">  <span class="keyword">constructor</span>(name, email) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.email = email;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  info() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Hi.I'm <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>,my email is <span class="subst">$&#123;<span class="keyword">this</span>.email&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//静态方法</span></span><br><span class="line">  <span class="keyword">static</span> description() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"description"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  set github(value) &#123;</span><br><span class="line">    <span class="keyword">this</span>.githubName = value;</span><br><span class="line">  &#125;</span><br><span class="line">  get github() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`https://github.com/<span class="subst">$&#123;<span class="keyword">this</span>.githubName&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> Alfred = <span class="keyword">new</span> User(<span class="string">"Alfred"</span>, <span class="string">"hi@qq.com"</span>);</span><br><span class="line"><span class="keyword">const</span> Raymond = <span class="keyword">new</span> User(<span class="string">"Raymond"</span>, <span class="string">"hi2@qq.com"</span>);</span><br><span class="line">Alfred.githubName = <span class="string">"Niccce"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Alfred.description();//Alfred.description is not a function</span></span><br><span class="line">User.description();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Alfred);</span><br><span class="line"><span class="built_in">console</span>.log(Alfred.github);</span><br></pre></td></tr></table></figure>
<ol start="7">
<li>class 中的方法名可以使用计算属性的格式</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> methodName = <span class="string">"info"</span>;</span><br><span class="line"><span class="keyword">const</span> User = <span class="class"><span class="keyword">class</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, email) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.email = email;</span><br><span class="line">  &#125;</span><br><span class="line">  [methodName]() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Hi.I'm <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>,my email is <span class="subst">$&#123;<span class="keyword">this</span>.email&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> Alfred = <span class="keyword">new</span> User(<span class="string">"Alfred"</span>, <span class="string">"hi@qq.com"</span>);</span><br><span class="line">Alfred.info();</span><br></pre></td></tr></table></figure>
<ol start="8">
<li>class 都要用 new 来调用，不能直接用类名调用</li>
</ol>
<h2 id="class-继承"><a href="#class-继承" class="headerlink" title="class 继承"></a>class 继承</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.belly = [];</span><br><span class="line">  &#125;</span><br><span class="line">  eat(food) &#123;</span><br><span class="line">    <span class="keyword">this</span>.belly.push(food);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.belly);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age) &#123;</span><br><span class="line">    <span class="keyword">super</span>(name); <span class="comment">//调用父类的构造函数</span></span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line">  bark() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"barking"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> lucky = <span class="keyword">new</span> Dog(<span class="string">"lucky"</span>, <span class="number">2</span>);</span><br><span class="line">lucky.eat(<span class="string">"meat"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(lucky);</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>在子类上定义的方法如果跟基类上的方法同名的话，会覆盖基类上的方法</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.belly = [];</span><br><span class="line">  &#125;</span><br><span class="line">  speak() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Hi,I'm <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age) &#123;</span><br><span class="line">    <span class="keyword">super</span>(name); <span class="comment">//调用父类的构造函数</span></span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line">  bark() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"barking"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  speak() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Bark,I'm <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> lucky = <span class="keyword">new</span> Dog(<span class="string">"lucky"</span>, <span class="number">2</span>);</span><br><span class="line">lucky.speak(); <span class="comment">//Bark,I'm lucky</span></span><br></pre></td></tr></table></figure>
<h2 id="扩展内建对象-Array"><a href="#扩展内建对象-Array" class="headerlink" title="扩展内建对象 Array"></a>扩展内建对象 Array</h2><p>简单例子</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyArray</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> colors = <span class="keyword">new</span> MyArray();</span><br><span class="line">colors[<span class="number">0</span>] = <span class="string">"red"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(colors.length); <span class="comment">//1</span></span><br><span class="line">colors.length = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.log(colors[<span class="number">0</span>]); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<p>简单运用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">singers</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, ...item) &#123;</span><br><span class="line">    <span class="comment">//在这里把剩余参数都写在了item里</span></span><br><span class="line">    <span class="keyword">super</span>(...item); <span class="comment">//在这里是把item里的元素都扩展出来</span></span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">  add(singer) &#123;</span><br><span class="line">    <span class="keyword">this</span>.push(singer);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> movies = <span class="keyword">new</span> singers(</span><br><span class="line">  <span class="string">"favorite singers"</span>,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"Raymond"</span>, <span class="attr">no</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"Alfred"</span>, <span class="attr">no</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"Greyson"</span>, <span class="attr">no</span>: <span class="number">3</span> &#125;</span><br><span class="line">);</span><br><span class="line">movies.push(&#123; <span class="attr">name</span>: <span class="string">"Fred"</span>, <span class="attr">no</span>: <span class="number">4</span> &#125;);</span><br><span class="line"><span class="built_in">console</span>.log(movies);</span><br><span class="line"><span class="built_in">console</span>.table(movies);</span><br></pre></td></tr></table></figure>
<h1 id="Iterator（遍历器-迭代器）"><a href="#Iterator（遍历器-迭代器）" class="headerlink" title="Iterator（遍历器/迭代器）"></a>Iterator（遍历器/迭代器）</h1><p>遍历器是一种接口，为各种不同的数据结构提供统一的访问机制。</p>
<ol>
<li>任何数据结构，只要部署了 Iterator 接口，就可以完成遍历操作。</li>
<li>Iterator 作用：</li>
</ol>
<ul>
<li>为各种数据结构提供统一的、简便的访问接口；</li>
<li>使得数据结构的成员能够按某次序排列；</li>
<li>ES6 创造了一种新的遍历命令——for of 循环，Iterator 接口主要供 for of 消费。</li>
</ul>
<ol start="3">
<li>遍历器是一个对象，其中有 next 方法，每次调用 next 方法都会返回数据结构的当前成员信息（value 和 done 两个属性对象），其中 value 属性是当前成员的值，done 属性是一个布尔值，表示变量是否结束。</li>
<li>ES6 规定，默认的 Iterator 接口部署在数据结构的 Symbol.iterator 属性，或者说，一个数据结构只要具有 Symbol.iterator 属性，就认为是“可遍历的”。调用 Symbol.iterator 方法，可以得到当前数据结构默认的遍历器生成函数。</li>
<li>for of 循环就是从遍历器中获取到 value 的值，在打印出来</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> colors = [<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"yellow"</span>];</span><br><span class="line"><span class="built_in">console</span>.log(colors);</span><br><span class="line"><span class="keyword">const</span> iterator = colors[<span class="built_in">Symbol</span>.iterator]();</span><br><span class="line"><span class="built_in">console</span>.log(iterator);</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br></pre></td></tr></table></figure>
<ul>
<li>在 ES6 中有三种类型的集合对象，分别是 Array、Map、Set，针对这三种数据类型，ES6 为它们提供了内建的遍历器，我们可以通过调用相应的方法来获取它们</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//colors.entries()这个方法返回的是元素的属性名可属性值</span></span><br><span class="line"><span class="keyword">const</span> colors = [<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"yellow"</span>];</span><br><span class="line"><span class="built_in">console</span>.log(colors.entries());</span><br><span class="line"><span class="keyword">const</span> iterator = colors.entries();</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> colors = [<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"yellow"</span>];</span><br><span class="line"><span class="built_in">console</span>.log(colors.values());</span><br><span class="line"><span class="keyword">const</span> iterator = colors.values();</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//colors.keys()返回的是元素的索引值</span></span><br><span class="line"><span class="keyword">const</span> colors = [<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"yellow"</span>];</span><br><span class="line"><span class="built_in">console</span>.log(colors.keys());</span><br><span class="line"><span class="keyword">const</span> iterator = colors.keys();</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br></pre></td></tr></table></figure>
<p><code>编写自己的遍历器</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.Myvalues = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span>; <span class="comment">//记录当前元素的位置</span></span><br><span class="line">  <span class="keyword">let</span> items = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">//这个方法返回一个对象，即遍历器</span></span><br><span class="line">    next() &#123;</span><br><span class="line">      <span class="keyword">const</span> done = i &gt;= items.length;</span><br><span class="line">      <span class="keyword">const</span> value = done ? <span class="literal">undefined</span> : items[i++];</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        value,</span><br><span class="line">        done</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> colors = [<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"yellow"</span>];</span><br><span class="line"><span class="keyword">const</span> iterator = colors.Myvalues();</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br></pre></td></tr></table></figure>
<h1 id="Generator（生成器）"><a href="#Generator（生成器）" class="headerlink" title="Generator（生成器）"></a>Generator（生成器）</h1><p>目前 JavaScript 的函数都是从上到下依次执行直到结束，而 Generator 函数可以开始暂停开始暂停，也可以在调用当中传入另外的参数。</p>
<h2 id="简单语法"><a href="#简单语法" class="headerlink" title="简单语法"></a>简单语法</h2><ol>
<li>function 命令与函数名之间有一个<code>*</code></li>
<li>函数体内部使用<code>yield</code>语句定义不同的内部状态（‘yield’意思是产出）</li>
<li>Generator 函数在调用后并不执行，返回的也不是函数运行结果，而是一个指向内部状态的指针对象，也就是遍历器。</li>
<li>必须调用遍历器的 next 方法，使得指针移向下一个状态。</li>
<li><strong>Generator 函数是分段执行的，yield 语句是暂停执行的标记，而 next 方法可以恢复执行</strong></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">listColors</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"red"</span>; <span class="comment">//有点类似函数的返回值，但这个yield是本次执行这个函数的返回值</span></span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"green"</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"yellow"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> colors = listColors();</span><br><span class="line"><span class="built_in">console</span>.log(colors); <span class="comment">//打印说是一个Generator，状态是suspended</span></span><br><span class="line"><span class="built_in">console</span>.log(colors.next());</span><br><span class="line"><span class="built_in">console</span>.log(colors.next());</span><br><span class="line"><span class="built_in">console</span>.log(colors.next());</span><br><span class="line"><span class="built_in">console</span>.log(colors.next());</span><br><span class="line"><span class="built_in">console</span>.log(colors);<span class="comment">//状态编程了closed</span></span><br></pre></td></tr></table></figure>
<h2 id="其他例子"><a href="#其他例子" class="headerlink" title="其他例子"></a>其他例子</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">num</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> i=<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">yield</span> i;</span><br><span class="line">  i++;</span><br><span class="line">  <span class="keyword">yield</span> i;</span><br><span class="line">  i++;</span><br><span class="line">  <span class="keyword">yield</span> i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> colors=num();</span><br><span class="line"><span class="built_in">console</span>.log(colors.next());</span><br><span class="line"><span class="built_in">console</span>.log(colors.next());</span><br><span class="line"><span class="built_in">console</span>.log(colors.next());</span><br><span class="line"><span class="built_in">console</span>.log(colors.next());</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> singers = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"Raymond"</span>, <span class="attr">no</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"Alfred"</span>, <span class="attr">no</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"Greyson"</span>, <span class="attr">no</span>: <span class="number">3</span> &#125;</span><br><span class="line">];</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">loop</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">const</span> repo <span class="keyword">of</span> arr)&#123;</span><br><span class="line">    <span class="keyword">yield</span> repo;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> repoGen=loop(singers);</span><br><span class="line"><span class="built_in">console</span>.log(repoGen);</span><br><span class="line"><span class="built_in">console</span>.log(repoGen .next());</span><br><span class="line"><span class="built_in">console</span>.log(repoGen .next());</span><br><span class="line"><span class="built_in">console</span>.log(repoGen .next());</span><br><span class="line"><span class="built_in">console</span>.log(repoGen .next());</span><br></pre></td></tr></table></figure>
<h2 id="Generator应用"><a href="#Generator应用" class="headerlink" title="Generator应用"></a>Generator应用</h2><ol>
<li>用于控制Ajax工作流<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/axios/dist/axios.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">url</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">    axios.get(url).then(<span class="function"><span class="params">res</span>=&gt;</span>userGen.next(res.data));<span class="comment">//4.请求完成后，将所得数据传给next方法继续进行Generator的下一步，得到的数据也会存到users中</span></span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span>* <span class="title">steps</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> users=<span class="keyword">yield</span> ajax(<span class="string">'https://api.github.com/users'</span>);<span class="comment">//3.开始请求GitHub用户，此时steps函数暂停了</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(users);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> firstUser=<span class="keyword">yield</span> ajax(<span class="string">`https://api.github.com/users/<span class="subst">$&#123;users[<span class="number">0</span>].login&#125;</span>`</span>);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(firstUser);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> followers=<span class="keyword">yield</span> ajax(firstUser.followers_url);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(followers);</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> userGen=steps();<span class="comment">//1.调用steps生成Generator</span></span></span><br><span class="line"><span class="javascript">  userGen.next();<span class="comment">//2.调用Generator的next方法开始执行Generator</span></span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h1><h2 id="什么是Proxy"><a href="#什么是Proxy" class="headerlink" title="什么是Proxy"></a>什么是Proxy</h2><ol>
<li>Proxy能够帮我们重写对象上默认的方法，用于修改某些操作的默认行为</li>
<li>proxy原意为代理，用在这里表示由它来“代理”某些操作，可以译为“代理器”</li>
<li>语法：<code>var proxy = new Proxy(target,handler);</code>，target是我们要代理的目标对象，handler是一个对象，它包含了我们想要重写的一些操作，这个对象里的方法我们称之为trap，这些方法详见<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener">MDN</a></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person=&#123;<span class="attr">name</span>:<span class="string">'Alfred'</span>,<span class="attr">age</span>:<span class="number">30</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> personProxy=<span class="keyword">new</span> <span class="built_in">Proxy</span>(person,&#123;</span><br><span class="line">  get(target,key)&#123;</span><br><span class="line">    <span class="keyword">return</span> target[key].toUpperCase();</span><br><span class="line">  &#125;,<span class="comment">//改变了获取属性值的默认操作</span></span><br><span class="line">  set(target,key,value)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> value ===<span class="string">'string'</span>)&#123;</span><br><span class="line">      target[key]=value.trim();<span class="comment">//去掉属性值左右的空格</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">personProxy.name=<span class="string">'Raymond'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(personProxy);<span class="comment">//Proxy &#123;name: "Raymond", age: 30&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(personProxy.name);<span class="comment">//RAYMOND</span></span><br><span class="line">personProxy.sayHi=<span class="string">'       Hi,Alfred        '</span>;</span><br><span class="line"><span class="built_in">console</span>.log(personProxy.sayHi);<span class="comment">//HI,ALFRED</span></span><br></pre></td></tr></table></figure>
<h2 id="Proxy应用例子"><a href="#Proxy应用例子" class="headerlink" title="Proxy应用例子"></a>Proxy应用例子</h2><ol>
<li><p>格式化电话号码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> phonenumHandler = &#123;</span><br><span class="line">  set(target, key, value) &#123;</span><br><span class="line">    target[key] = value.match(<span class="regexp">/[0-9]/g</span>).join(<span class="string">""</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  get(target, key) &#123;</span><br><span class="line">    <span class="keyword">return</span> target[key].replace(<span class="regexp">/(\d&#123;3&#125;)(\d&#123;4&#125;)(\d&#123;4&#125;)/</span>, <span class="string">"$1-$2-$3"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> phoneNum = <span class="keyword">new</span> <span class="built_in">Proxy</span>(&#123;&#125;, phonenumHandler);</span><br><span class="line">phoneNum.home = <span class="string">"131 2222 3333"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(phoneNum);<span class="comment">//Proxy &#123;home: "13122223333"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(phoneNum.home);<span class="comment">//131-2222-3333</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>match()方法可在字符串内检索指定的值，或找到一个或多个正则表达式的匹配。<br>join()方法用于把数组中的所有元素通过指定的分隔符进行分隔，然后放入一个字符串。<br>replace()方法用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串。</p>
</blockquote>
</li>
<li><p>对用户的操作进行处理或保护<br>比如给用户提供了一个对象person，里面有一个id属性，有时候别人可能不会很清楚你的’id’的大小写</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">id</span>: <span class="number">2</span> &#125;;</span><br><span class="line">person.ID = <span class="number">2</span>;</span><br><span class="line">person.iD = <span class="number">2</span>;</span><br><span class="line">person.id = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<p>为了避免用户花费很多时间来排除这样一些bug，我们可以通过proxy来对用户的操作进行处理或保护</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> safeHandler = &#123;</span><br><span class="line">  set(target, key, value) &#123;</span><br><span class="line">    <span class="keyword">const</span> likeKey=<span class="built_in">Object</span>.keys(target).find(<span class="function"><span class="params">k</span>=&gt;</span>k.toLowerCase()===key.toLowerCase());<span class="comment">//用来寻找对象属性中和我们定义的属性很相似，只是大小写不同的属性</span></span><br><span class="line">    <span class="keyword">if</span>(!(key <span class="keyword">in</span> target)&amp;&amp; likeKey)&#123;</span><br><span class="line">      <span class="comment">//如果我们要设置的这个属性不在我们的target里，并且它有相似的key</span></span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`Oops!Looks like we already have a property <span class="subst">$&#123;key&#125;</span> but with the case of <span class="subst">$&#123;likeKey&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    target[key]=value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> safetyProxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(&#123; <span class="attr">id</span>: <span class="number">2</span> &#125;, safeHandler);</span><br><span class="line">safetyProxy.ID = <span class="number">5</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" target="_blank" rel="noopener">Object.keys(obj)</a><br><a href="https://www.runoob.com/jsref/jsref-find.html" target="_blank" rel="noopener">find()</a></p>
</blockquote>
</li>
</ol>
<h1 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h1><ul>
<li>ES6提供的新的数据类型，它类似于数组，但是成员的值都是唯一的，没有重复。</li>
<li>不能通过索引值来获取元素</li>
</ul>
<p>简单用法：</p>
<ol>
<li>用<code>add()</code>添加元素，<code>size</code>获取Set长度</li>
<li>如果有一个属性是数值5，还有一个是字符串5，在对象中，数值5会被强制转换成字符串5，但是在Set中则是不同的两个属性。</li>
<li>如果add一个Set里已存在的元素，它会忽略你的操作</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> color = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">color.add(<span class="string">"red"</span>);</span><br><span class="line">color.add(<span class="string">"green"</span>);</span><br><span class="line">color.add(<span class="string">"yellow"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(color);<span class="comment">//Set(3) &#123;"red", "green", "yellow"&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//调用构造函数时初始化</span></span><br><span class="line"><span class="keyword">const</span> fruits=<span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">'apple'</span>,<span class="string">'banana'</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(fruits);<span class="comment">//Set(2) &#123;"apple", "banana"&#125;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> color = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">color.add(<span class="string">"red"</span>);</span><br><span class="line">color.add(<span class="string">"green"</span>);</span><br><span class="line">color.add(<span class="string">"yellow"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(color.size); <span class="comment">//获取长度</span></span><br><span class="line"></span><br><span class="line">color.add(<span class="string">"5"</span>);</span><br><span class="line">color.add(<span class="number">5</span>);</span><br><span class="line"><span class="built_in">console</span>.log(color); <span class="comment">//Set(5) &#123;"red", "green", "yellow", "5", 5&#125;</span></span><br><span class="line"></span><br><span class="line">color.add(<span class="string">"yellow"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(color); <span class="comment">//Set(5) &#123;"red", "green", "yellow", "5", 5&#125;</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>用<code>delete()</code>删除元素，<code>has()</code>检验一个元素是否存在，<code>clear()</code>清楚所有元素</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> color = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">color.add(<span class="string">"red"</span>);</span><br><span class="line">color.add(<span class="string">"green"</span>);</span><br><span class="line">color.add(<span class="string">"yellow"</span>);</span><br><span class="line">color.delete(<span class="string">'red'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(color);<span class="comment">//Set(2) &#123;"green", "yellow"&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(color.has(<span class="string">'red'</span>));<span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(color.has(<span class="string">'green'</span>));<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">color.clear();</span><br><span class="line"><span class="built_in">console</span>.log(color);<span class="comment">//Set(0) &#123;&#125;</span></span><br></pre></td></tr></table></figure>
<ol start="5">
<li>Set可以遍历</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> color = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">color.add(<span class="string">"red"</span>);</span><br><span class="line">color.add(<span class="string">"green"</span>);</span><br><span class="line">color.add(<span class="string">"yellow"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(color.values());</span><br><span class="line"><span class="keyword">const</span> iterator=color.values();</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());</span><br><span class="line"></span><br><span class="line"><span class="comment">//因为Set部署了遍历器接口，因此可以用for of循环</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> Color <span class="keyword">of</span> color)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(Color);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">color.forEach(<span class="function">(<span class="params">item,key,ownSet</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item,key,ownSet);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>数组去重</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nums = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> numSet = <span class="keyword">new</span> <span class="built_in">Set</span>(nums);</span><br><span class="line"><span class="built_in">console</span>.log(numSet);<span class="comment">//Set(5) &#123;1, 2, 3, 4, 5&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//将Set转换为数组</span></span><br><span class="line"><span class="keyword">const</span> numArr=[...numSet];</span><br><span class="line"><span class="built_in">console</span>.log(numArr);<span class="comment">//[1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure></p>
<h1 id="WeakSet"><a href="#WeakSet" class="headerlink" title="WeakSet"></a>WeakSet</h1><ol>
<li>与Set类似，也是不重复的值的集合</li>
<li><p>里面的元素只能是<strong>对象</strong>，没有size属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Raymond=&#123;<span class="attr">name</span>:<span class="string">'Raymond'</span>,<span class="attr">age</span>:<span class="number">30</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> Fred=&#123;<span class="attr">name</span>:<span class="string">'Fred'</span>,<span class="attr">age</span>:<span class="number">30</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> people=<span class="keyword">new</span> <span class="built_in">WeakSet</span>([Raymond,Fred]);</span><br><span class="line">people.add(<span class="string">'Alex'</span>);<span class="comment">//Uncaught TypeError: Invalid value used in weak set</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>不能使用for of来循环</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Raymond = &#123; <span class="attr">name</span>: <span class="string">"Raymond"</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> Fred = &#123; <span class="attr">name</span>: <span class="string">"Fred"</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> people = <span class="keyword">new</span> <span class="built_in">WeakSet</span>([Raymond, Fred]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> person <span class="keyword">of</span> people) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(person);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Uncaught TypeError: people is not iterable</span></span><br></pre></td></tr></table></figure>
<p>因为WeakSet没有配置<code>iterator（迭代器/遍历器）</code></p>
</li>
<li><p>没有forEach方法，相当于不能循环</p>
</li>
<li><p>没有clear方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Raymond = &#123; <span class="attr">name</span>: <span class="string">"Raymond"</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> Fred = &#123; <span class="attr">name</span>: <span class="string">"Fred"</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> people = <span class="keyword">new</span> <span class="built_in">WeakSet</span>([Raymond, Fred]);</span><br><span class="line"></span><br><span class="line">people.forEach(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">console</span>.log(item));</span><br><span class="line"><span class="comment">//Uncaught TypeError: people.forEach is not a function</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>有自动清理机制</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Raymond = &#123; <span class="attr">name</span>: <span class="string">"Raymond"</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> Fred = &#123; <span class="attr">name</span>: <span class="string">"Fred"</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// const people = new WeakSet([Raymond, Fred]);</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> peopleArr=[Raymond,Fred];</span><br><span class="line"><span class="built_in">console</span>.log(peopleArr);</span><br><span class="line">Fred=<span class="literal">null</span>;<span class="comment">//把Fred对象删除掉</span></span><br><span class="line"><span class="built_in">console</span>.log(peopleArr);<span class="comment">//Fred仍然存在，这是常说的内存泄漏</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//由于peopleArr里还存在对Fred的引用，因此Fred没有被删除</span></span><br></pre></td></tr></table></figure>
<p>而WeakSet不同，会帮我们把引用删除</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Raymond = &#123; <span class="attr">name</span>: <span class="string">"Raymond"</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> Fred = &#123; <span class="attr">name</span>: <span class="string">"Fred"</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> people = <span class="keyword">new</span> <span class="built_in">WeakSet</span>([Raymond, Fred]);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(people);</span><br><span class="line">Fred=<span class="literal">null</span>;<span class="comment">//把Fred对象删除掉</span></span><br><span class="line"><span class="built_in">console</span>.log(people);<span class="comment">//虽然此时Fred还在，但是在控制台中输入people再次查看，Fred没有了</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h1><ul>
<li>如果把Set类比为数组，那Map就能类比为对象</li>
<li>Map和Set有许多相似的地方，只不过Map存储的是键值对</li>
</ul>
<p>简单用法：</p>
<ol>
<li><p>用<code>set()</code>添加元素,<code>size</code>获取键值对数量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> people=<span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">people.set(<span class="string">'Raymond'</span>,<span class="number">20</span>);<span class="comment">//people.set(key,value)</span></span><br><span class="line">people.set(<span class="string">'Fred'</span>,<span class="number">30</span>);</span><br><span class="line">people.set(<span class="string">'Greyson'</span>,<span class="number">21</span>);</span><br><span class="line"><span class="built_in">console</span>.log(people.size);<span class="comment">//3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//调用构造函数时初始化</span></span><br><span class="line"><span class="keyword">const</span> fruits=<span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="string">'apple'</span>,<span class="number">6</span>],[<span class="string">'banana'</span>,<span class="number">5</span>]]);</span><br><span class="line"><span class="built_in">console</span>.log(fruits);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Map与对象的不同就是，它的key可以是任意类型的数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> people=<span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">people.set(&#123;&#125;,<span class="number">3</span>)</span><br><span class="line"><span class="built_in">console</span>.log(people);</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果想获取里面的属性值，可用<code>get()</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> people = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">people.set(<span class="string">"Raymond"</span>, <span class="number">20</span>);</span><br><span class="line">people.set(<span class="string">"Fred"</span>, <span class="number">30</span>);</span><br><span class="line">people.set(<span class="string">"Greyson"</span>, <span class="number">21</span>);</span><br><span class="line"><span class="built_in">console</span>.log(people.get(<span class="string">"Raymond"</span>)); <span class="comment">//20</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>用<code>delete()</code>删除元素，<code>has()</code>查看某个属性是否存在，<code>clear()</code>清楚所有元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> people = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">people.set(<span class="string">"Raymond"</span>, <span class="number">20</span>);</span><br><span class="line">people.set(<span class="string">"Fred"</span>, <span class="number">30</span>);</span><br><span class="line">people.set(<span class="string">"Greyson"</span>, <span class="number">21</span>);</span><br><span class="line"></span><br><span class="line">people.delete(<span class="string">'Raymond'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(people.has(<span class="string">"Raymond"</span>)); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(people.has(<span class="string">"Fred"</span>)); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">people.clear();</span><br><span class="line"><span class="built_in">console</span>.log(people);<span class="comment">//Map(0) &#123;&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Map可以遍历</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> people = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">people.set(<span class="string">"Raymond"</span>, <span class="number">20</span>);</span><br><span class="line">people.set(<span class="string">"Fred"</span>, <span class="number">30</span>);</span><br><span class="line">people.set(<span class="string">"Greyson"</span>, <span class="number">21</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (person <span class="keyword">of</span> people) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(person);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//可以对person进解构</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key,value] <span class="keyword">of</span> people) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key,value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">people.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value, key, map</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value, key, map);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>简单应用</strong></p>
<ul>
<li>当我们想存储关于这个对象的信息，但又不存储在对象上<br>例子：我想记录页面上每个button被点击的次数<br><strong>方法一：</strong>我们可以给每个button设置一个id，用一个对象来记录它们，但是如果这个button的id被移除了或者相应的对象被移除了，就找不到它点击的信息了</li>
</ul>
<p><strong>方法二：</strong>通过原数据来存储button相对应的信息<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>Hi<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>World<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> clickCounts=<span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="keyword">const</span> buttons=<span class="built_in">document</span>.querySelectorAll(<span class="string">'button'</span>);</span><br><span class="line">buttons.forEach(<span class="function"><span class="params">button</span>=&gt;</span>&#123;</span><br><span class="line">  clickCounts.set(button,<span class="number">0</span>);</span><br><span class="line">  button.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> val=clickCounts.get(<span class="keyword">this</span>);</span><br><span class="line">    clickCounts.set(<span class="keyword">this</span>,val+<span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(clickCounts);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h1 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h1><ol>
<li>在Map的基础上有一些限制</li>
<li><p>key只能是对象，没有size属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Raymond = &#123; <span class="attr">name</span>: <span class="string">"Raymond"</span> &#125;;<span class="comment">//对象作为key</span></span><br><span class="line"><span class="keyword">let</span> Fred = &#123; <span class="attr">name</span>: <span class="string">"Fred"</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> strong = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="keyword">const</span> weak = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line">strong.set(Raymond,<span class="string">'Hi,Raymond'</span>);</span><br><span class="line">weak.set(Fred,<span class="string">'Hi,Fred'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(strong);</span><br><span class="line"><span class="built_in">console</span>.log(weak);</span><br><span class="line"><span class="built_in">console</span>.log(strong.size);<span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(weak.size)<span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Raymond = &#123; <span class="attr">name</span>: <span class="string">"Raymond"</span> &#125;; <span class="comment">//对象作为key</span></span><br><span class="line"><span class="keyword">let</span> Fred = &#123; <span class="attr">name</span>: <span class="string">"Fred"</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> strong = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="keyword">const</span> weak = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line">strong.set(Raymond, <span class="string">"Hi,Raymond"</span>);</span><br><span class="line">weak.set(Fred, <span class="string">"Hi,Fred"</span>);</span><br><span class="line"></span><br><span class="line">weak.set(<span class="string">"Gray"</span>, <span class="number">20</span>);<span class="comment">//Uncaught TypeError: Invalid value used as weak map key</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>不能循环</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Raymond = &#123; <span class="attr">name</span>: <span class="string">"Raymond"</span> &#125;;<span class="comment">//对象作为key</span></span><br><span class="line"><span class="keyword">let</span> Fred = &#123; <span class="attr">name</span>: <span class="string">"Fred"</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> strong = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="keyword">const</span> weak = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line">strong.set(Raymond,<span class="string">'Hi,Raymond'</span>);</span><br><span class="line">weak.set(Fred,<span class="string">'Hi,Fred'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> person <span class="keyword">of</span> weak)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(person);<span class="comment">//Uncaught TypeError: weak is not iterable</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因为WeakMap没有配置<code>iterator（迭代器/遍历器）</code></p>
</li>
<li><p>没有clear方法</p>
</li>
<li><p>有自动清理机制，如果它里面的元素在其他地方没有被引用，垃圾清理机制就会自动清理掉这个元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Raymond = &#123; <span class="attr">name</span>: <span class="string">"Raymond"</span> &#125;; <span class="comment">//对象作为key</span></span><br><span class="line"><span class="keyword">let</span> Fred = &#123; <span class="attr">name</span>: <span class="string">"Fred"</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> strong = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="keyword">const</span> weak = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line">strong.set(Raymond, <span class="string">"Hi,Raymond"</span>);</span><br><span class="line">weak.set(Fred, <span class="string">"Hi,Fred"</span>);</span><br><span class="line"></span><br><span class="line">Raymond = <span class="literal">null</span>;</span><br><span class="line">Fred = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>
<p>在控制台输入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(strong);</span><br><span class="line"><span class="built_in">console</span>.log(weak);</span><br></pre></td></tr></table></figure>
<p>可见strong里还有Raymond，weak里什么都没有</p>
</li>
</ol>

        
    

    
</div>


   <div>
   <br/>
   <ul id="post-license" class="post-license">
       <li class="post-license-author">
           <strong>本文作者：</strong>
           <a href="https://niccce.github.io">Niccce</a>
       </li>

       <li class="post-license-link">
           <strong>本文链接：</strong>
           <a href="https://niccce.github.io/2019/09/04/Knowledge-Points-of-ES6/">https://niccce.github.io/2019/09/04/Knowledge-Points-of-ES6/</a>
           <!-- <a href="https://niccce.github.io/2019/09/04/Knowledge-Points-of-ES6/">ES6知识点归纳</a> -->
       </li>

       <li class="post-license-statement">
           <strong>版权声明： </strong>
           本文由 Niccce 原创，采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="license" target="_blank">署名-非商业性使用-相同方式共享（CC BY-NC-SA）4.0 国际许可协议</a>
		   </br>转载请保留以上声明信息！
       </li>
   </ul>
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2019/10/09/front-end-interview-guide/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2019/08/27/quick-to-learn-Webpack4-x/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.jpg);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/Niccce.jpg" alt="Niccce's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        Welcome to my secret garden!
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:niccce@foxmail.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2019/10/">十月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/09/">九月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/08/">八月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/06/">六月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/09/">九月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/08/">八月 2018<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/essay/">essay<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/学习汇总/">学习汇总<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/汇总整理/">汇总整理<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/读书笔记/">读书笔记<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="标签">
                
                    <i class="material-icons sidebar-material-icons">local_offer</i>
                
                标签
            </a>
        </li>
        
    
        <li>
            <a href="/timeline" title="Timeline">
                
                    <i class="material-icons sidebar-material-icons">send</i>
                
                Timeline
            </a>
        </li>
        
    
        <li>
            <a href="/myWorks" title="我的作品集">
                
                    <i class="material-icons sidebar-material-icons">book</i>
                
                我的作品集
            </a>
        </li>
        
    
        <li>
            <a href="/links" title="友情链接">
                
                    <i class="material-icons sidebar-material-icons">person_add</i>
                
                友情链接
            </a>
        </li>
        
    
        <li>
            <a href="/aboutMe" title="About Me">
                
                    <i class="material-icons sidebar-material-icons">account_box</i>
                
                About Me
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    
        <a href="https://weibo.com/u/2583021730" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-weibo">
                <span class="visuallyhidden">Weibo</span>
            </button><!--
     --></a>
    

    <!-- Instagram -->
    
        <a href="https://www.instagram.com/niccce1208/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-instagram">
                <span class="visuallyhidden">Instagram</span>
            </button><!--
     --></a>
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/Niccce" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    
        <a href="https://space.bilibili.com/11197209/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-bilibili">
                <span class="visuallyhidden">Bilibili</span>
            </button><!--
     --></a>
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;2018&nbsp;-<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>Secret garden
            
                <br>
                
                    Keep Calm and Smile On
                
            
        </div>



        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
		-->


		<div class="mdl-mini-footer--right-section">
            <div>
                <!--<span id="busuanzi_container_site_uv">访客数<span id="busuanzi_value_site_uv"></span>人次</span>-->
                <div class="footer-develop-div">Powered by Hexo</div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>







    <!-- Busuanzi -->
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>







<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
