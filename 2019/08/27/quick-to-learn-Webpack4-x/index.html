<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">



    <link rel="dns-prefetch" href="https://busuanzi.ibruce.info"/>












    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            webpack4.x快速入门 | 
        
        Secret garden
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/iceCreamFavicon.png">
    <link rel="icon" href="/img/iceCreamFavicon.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="小雪糕的秘密fa园">
    <meta name="keywords" content="林峯,Raymond Lam,Life,汇总,前端,学习,webpack">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?U9E9WBr2I8FiIu2wnY3row==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(/img/bg.png);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Secret garden">
    <meta name="msapplication-starturl" content="https://niccce.github.io/2019/08/27/quick-to-learn-Webpack4-x/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Secret garden">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/iceCreamFavicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://niccce.github.io/2019/08/27/quick-to-learn-Webpack4-x/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="webpack4.x快速入门 | Secret garden">
    <meta property="og:image" content="/img/iceCreamFavicon.png">
    <meta property="og:description" content="小雪糕的秘密fa园">
    <meta property="og:article:tag" content="汇总"> <meta property="og:article:tag" content="前端"> <meta property="og:article:tag" content="学习"> <meta property="og:article:tag" content="webpack"> 

    
        <meta property="article:published_time" content="Tue Aug 27 2019 10:37:29 GMT+0800">
        <meta property="article:modified_time" content="Wed Sep 04 2019 10:47:14 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://niccce.github.io/2019/08/27/quick-to-learn-Webpack4-x/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://niccce.github.io/2019/08/27/quick-to-learn-Webpack4-x/index.html",
    "headline": "webpack4.x快速入门",
    "datePublished": "Tue Aug 27 2019 10:37:29 GMT+0800",
    "dateModified": "Wed Sep 04 2019 10:47:14 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "Niccce",
        "image": {
            "@type": "ImageObject",
            "url": "/img/Niccce.jpg"
        },
        "description": "<h3>小雪糕的秘密fa园</h3>"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Secret garden",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/iceCreamFavicon.png"
        }
    },
    "keywords": ",汇总,前端,学习,webpack林峯,Raymond Lam,Life",
    "description": "小雪糕的秘密fa园",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#前言"><span class="post-toc-number">1.</span> <span class="post-toc-text">前言</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#webpack是什么"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">webpack是什么</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#loader"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">loader</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#模块（modules）"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">模块（modules）</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#1-Webpack快速入门demo"><span class="post-toc-number">2.</span> <span class="post-toc-text">1.Webpack快速入门demo</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#创建demo"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">创建demo</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#2-webpack处理css模块"><span class="post-toc-number">3.</span> <span class="post-toc-text">2.webpack处理css模块</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#3-webpack的模块和sass"><span class="post-toc-number">4.</span> <span class="post-toc-text">3.webpack的模块和sass</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#4-webpack的sass添加c3前缀和sourcemap处理"><span class="post-toc-number">5.</span> <span class="post-toc-text">4.webpack的sass添加c3前缀和sourcemap处理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Source-Map处理"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">Source Map处理</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#为样式添加前缀（-webkit-等等）"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">为样式添加前缀（-webkit-等等）</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#5-webpack的css提取成单独的文件"><span class="post-toc-number">6.</span> <span class="post-toc-text">5.webpack的css提取成单独的文件</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#6-webpack的css和js压缩插件使用"><span class="post-toc-number">7.</span> <span class="post-toc-text">6.webpack的css和js压缩插件使用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#压缩CSS"><span class="post-toc-number">7.1.</span> <span class="post-toc-text">压缩CSS</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#压缩JS"><span class="post-toc-number">7.2.</span> <span class="post-toc-text">压缩JS</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#7-解决文件名带哈希值的问题"><span class="post-toc-number">8.</span> <span class="post-toc-text">7.解决文件名带哈希值的问题</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#为什么要让文件带上哈希值？"><span class="post-toc-number">8.1.</span> <span class="post-toc-text">为什么要让文件带上哈希值？</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#方法"><span class="post-toc-number">8.1.1.</span> <span class="post-toc-text">方法</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#优化"><span class="post-toc-number">8.2.</span> <span class="post-toc-text">优化</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#8-清理dist目录插件clean-webpack-plugin应用"><span class="post-toc-number">9.</span> <span class="post-toc-text">8.清理dist目录插件clean-webpack-plugin应用</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#9-图片处理及优化"><span class="post-toc-number">10.</span> <span class="post-toc-text">9.图片处理及优化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#file-loader处理文件的导入"><span class="post-toc-number">10.1.</span> <span class="post-toc-text">file-loader处理文件的导入</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#优化图片，使用image-webpack-loader可以帮助我们对图片进行压缩和优化。"><span class="post-toc-number">10.2.</span> <span class="post-toc-text">优化图片，使用image-webpack-loader可以帮助我们对图片进行压缩和优化。</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#10-图片base64优化和字体处理"><span class="post-toc-number">11.</span> <span class="post-toc-text">10.图片base64优化和字体处理</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#11-webpack的配置合并、提前公共配置"><span class="post-toc-number">12.</span> <span class="post-toc-text">11.webpack的配置合并、提前公共配置</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#12-webpack的启动监控自动编译和启用js的sourcemap"><span class="post-toc-number">13.</span> <span class="post-toc-text">12.webpack的启动监控自动编译和启用js的sourcemap</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#启用js的sourcemap"><span class="post-toc-number">13.1.</span> <span class="post-toc-text">启用js的sourcemap</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#监控文件变化，自动编译，使用观察模式"><span class="post-toc-number">13.2.</span> <span class="post-toc-text">监控文件变化，自动编译，使用观察模式</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#13-webpack的启动热更新和代理配置"><span class="post-toc-number">14.</span> <span class="post-toc-text">13.webpack的启动热更新和代理配置</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#14-webpack的代理服务器设置和babel转换及优化"><span class="post-toc-number">15.</span> <span class="post-toc-text">14.webpack的代理服务器设置和babel转换及优化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#babel转码"><span class="post-toc-number">15.1.</span> <span class="post-toc-text">babel转码</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#babel优化"><span class="post-toc-number">15.2.</span> <span class="post-toc-text">babel优化</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#15-webpack的eslint校验配置"><span class="post-toc-number">16.</span> <span class="post-toc-text">15.webpack的eslint校验配置</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 13 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                webpack4.x快速入门
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/Niccce.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <!--<strong>Niccce</strong>-->
        <!--<span>8月 27, 2019</span>-->
        <span>发表：2019.08.27</span>
        <span>更新：2019.09.04</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">在其它设备中阅读本文章</li>
    
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAAC3ElEQVR42u3aS5bbMAwEQN//0skBElHdpJxRyOLKz6MPC4uBAfDz68j1wcbGxsbGxsbGxn4l+xOvq+v/8oI/vr96QvLX8TXJnrGxsbFPYN/867/YYruJcRDH+0muuQk9NjY29gHs8ebGG30Kme8hvx4bGxsbe1wYJEllXGCsBAsbGxsbey6BtVsfh2D9MzY2NjZ226CZaz/l+Jz9j3pp2NjY2K9nt42hN3z+gfk2NjY29ivZK2tccuRHfHLY0m6xsbGxN2XPHcGZayetFDxzhzKxsbGxT2Anj3hq4NoODOYCffkWbGxs7IPZ+ZGdcZjyVJTvYRxKbGxs7BPY7c35mLZNhHlR1JZM2NjY2Cew2wZ9EqZ2SJwnqva4DzY2NvYJ7La53x6yWRnlzo0NokEvNjY29nbs9TLgG42nvIy5CTo2Njb21uy5xJCnqLkU2N5180ZsbGzsTdlzB2jmwpGkurmGURQybGxs7K3ZxQ/6MiGtrLmxBDY2NvZp7PWm0jeGBO2Tf6CXho2Njf0a9kpSaQFtuyq/tz6yg42Njb01u916MgZ46lBmHtylXho2Njb2f8Wea9yvFyrtu9rRLzY2NvY57Pxx7cGaPLHl5c3KMBgbGxt7V/ZK2sgLlZUxbdvAutwVNjY29qbsuWHAyrg3SWxtAktCiY2Njb0rO/kRPxeCfHw73kk7fih6adjY2NgbsduDOHMbzVNg/k1eSmFjY2PvzV5PVG1o8gT22HuxsbGxj2HPNejzAzTfGwbcFC3Y2NjYm7LblYSpHRU8NSS+CSg2Njb2puw2JbTFSZvwWl5R2GBjY2NvzX4qFeXpbW5E0Y6HsbGxsU9jt62ivH2/EuK2hVT30rCxsbGxg+TRJq1kVNA2mLCxsbGxnxoVjEk1Zr2phI2Njb0Re2W4mxx8nwtE/s1NOsTGxsbemj036G2bSuuD2+KADjY2NvYx7HMWNjY2NjY2NjY29mvWb6J9AZO3lNYsAAAAAElFTkSuQmCC">
    
</ul>

    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/webpack/">webpack</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/前端/">前端</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/学习/">学习</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/汇总/">汇总</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    
        
            <!-- Busuanzi Views -->
            <a class="post_share-link" href="#">
                <li class="mdl-menu__item">
                    <span id="busuanzi_container_page_pv">
                        <!--<span id="busuanzi_value_page_pv"></span>&nbsp;浏览量-->
                        浏览量：<span id="busuanzi_value_page_pv"></span>
                    </span>
                </li>
            </a>
        
    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=webpack4.x快速入门&url=https://niccce.github.io/2019/08/27/quick-to-learn-Webpack4-x/index.html&pic=https://niccce.github.io/img/iceCreamFavicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=webpack4.x快速入门&url=https://niccce.github.io/2019/08/27/quick-to-learn-Webpack4-x/index.html&via=Niccce" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://niccce.github.io/2019/08/27/quick-to-learn-Webpack4-x/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://niccce.github.io/2019/08/27/quick-to-learn-Webpack4-x/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    
        <a class="post_share-link" href="https://www.linkedin.com/shareArticle?mini=true&url=https://niccce.github.io/2019/08/27/quick-to-learn-Webpack4-x/index.html&title=webpack4.x快速入门" target="_blank">
            <li class="mdl-menu__item">
                分享到 LinkedIn
            </li>
        </a>
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=Secret garden&title=webpack4.x快速入门&summary=小雪糕的秘密fa园&pics=https://niccce.github.io/img/iceCreamFavicon.png&url=https://niccce.github.io/2019/08/27/quick-to-learn-Webpack4-x/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <blockquote>
<p>近期看了webpack4.0的教程，以下是视频学习整理，供大家参考<br>视频地址：<a href="https://www.bilibili.com/video/av41546218" target="_blank" rel="noopener">https://www.bilibili.com/video/av41546218</a><br>视频中的笔记见<a href="https://malun666.github.io/aicoder_vip_doc/#/pages/vip_2webpack" target="_blank" rel="noopener">https://malun666.github.io/aicoder_vip_doc/#/pages/vip_2webpack</a><br>webpack中文文档：<a href="https://www.webpackjs.com/" target="_blank" rel="noopener">https://www.webpackjs.com/</a><br>我根据视频教程的学习，截止到第15个视频，实践的代码及配置详见：<br><a href="https://github.com/Niccce/webpackLearning/blob/master/webpackdemo/webpack4.x%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.md" target="_blank" rel="noopener">https://github.com/Niccce/webpackLearning/blob/master/webpackdemo/webpack4.x%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.md</a><br>csdn博文链接：<a href="https://blog.csdn.net/qq_41445033/article/details/100019830" target="_blank" rel="noopener">https://blog.csdn.net/qq_41445033/article/details/100019830</a></p>
</blockquote>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><h2 id="webpack是什么"><a href="#webpack是什么" class="headerlink" title="webpack是什么"></a>webpack是什么</h2><p>本质上，webpack 是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)。当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。</p>
<h2 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h2><p>loader 让 webpack 能够去处理那些非 JavaScript 文件（webpack 自身只理解 JavaScript）。loader 可以将所有类型的文件转换为 webpack 能够处理的有效模块，然后你就可以利用 webpack 的打包能力，对它们进行处理。</p>
<h2 id="模块（modules）"><a href="#模块（modules）" class="headerlink" title="模块（modules）"></a>模块（modules）</h2><p>对比 Node.js 模块，webpack 模块能够以各种方式表达它们的依赖关系，几个例子如下：</p>
<ul>
<li>ES2015 <code>import</code> 语句</li>
<li>CommonJS <code>require()</code> 语句</li>
<li>AMD <code>define</code> 和 <code>require</code> 语句</li>
<li>css/sass/less 文件中的 <code>@import</code> 语句。</li>
<li><ul>
<li>样式(<code>url(...)</code>)或 HTML 文件(<code>&lt;img src=...&gt;</code>)中的图片链接(image url)</li>
</ul>
</li>
</ul>
<h1 id="1-Webpack快速入门demo"><a href="#1-Webpack快速入门demo" class="headerlink" title="1.Webpack快速入门demo"></a>1.Webpack快速入门demo</h1><blockquote>
<p>webpack最好安装在项目中，若全局安装，就都是全局安装的版本，但是有一些老项目可能是用老版本的webpack开发的。<br>webpack官方文档写到：不推荐全局安装 webpack。这会将你项目中的 webpack 锁定到指定版本，并且在使用不同的 webpack 版本的项目中，可能会导致构建失败。</p>
</blockquote>
<ul>
<li>4.0之前的版本安装webpack就可以了，但是4.0之后的版本需要再安装webpack-cli<h2 id="创建demo"><a href="#创建demo" class="headerlink" title="创建demo"></a>创建demo</h2></li>
</ul>
<ol>
<li>新建一个空的文件夹wpdemo</li>
<li>打开终端，输入<code>npm init -y</code>，初始化package.json文件</li>
<li>在终端输入<code>npm i -D webpack</code>本地安装webpack</li>
<li>在终端输入<code>npm i -D webpack-cli</code>安装webpack-cli</li>
<li>新建dist文件夹及其中的index.html；新建src文件夹机器中的index.js</li>
<li>在终端输入<code>npm i lodash -P</code>安装lodash</li>
<li><p>编写html.js文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">'lodash'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createDomELement</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> dom = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">    <span class="comment">//使用了loadsh 的 join() 方法,将 字符串 用 空格进行 拼接   </span></span><br><span class="line">    dom.innerHTML = _.join([<span class="string">'你好'</span>, <span class="string">'webpack'</span>], <span class="string">''</span>);</span><br><span class="line">    <span class="keyword">return</span> dom;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(createDomELement());</span><br></pre></td></tr></table></figure>
</li>
<li><p>在根目录下新建文件webpack.config.js</p>
</li>
<li><p>编写webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);   <span class="comment">//引用path模块</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//对外导出一个对象</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,    <span class="comment">//入口</span></span><br><span class="line">    mode: <span class="string">'development'</span>,        <span class="comment">//代表我们现在是开发阶段</span></span><br><span class="line">    output: &#123;                   <span class="comment">//输出</span></span><br><span class="line">        filename: <span class="string">'main.js'</span>,    <span class="comment">//最终打包后的文件名</span></span><br><span class="line">        path: path.resolve(__dirname,<span class="string">'dist'</span>)<span class="comment">//最终main.js在哪个文件夹下</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行<code>npx webpack</code>进行打包，dist中出现了main.js文件</p>
</li>
<li>编写dist中的index.html<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>注：这个demo也可以看webpack的中文文档实例</li>
<li><a href="https://www.webpackjs.com/guides/installation/" target="_blank" rel="noopener">https://www.webpackjs.com/guides/installation/</a></li>
</ul>
<h1 id="2-webpack处理css模块"><a href="#2-webpack处理css模块" class="headerlink" title="2.webpack处理css模块"></a>2.webpack处理css模块</h1><ul>
<li>webpack默认处理不了css文件，需要对应的loader去解析</li>
<li>css-loader可以让webpack解析css模块</li>
<li>style-loader可以帮我们把依赖的的css文件转换成style标签，加入到html文件中去</li>
</ul>
<ol>
<li><p>在src中新建style文件夹及其中的index.css文件</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将样式给指定元素，修改index.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">'lodash'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./style/index.css'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createDomELement</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> dom = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">    <span class="comment">//使用了loadsh 的 join() 方法,将 字符串 用 空格进行 拼接   </span></span><br><span class="line">    dom.innerHTML = _.join([<span class="string">'你好'</span>, <span class="string">'webpack'</span>], <span class="string">''</span>);</span><br><span class="line">    <span class="comment">// dom.className = 'box';</span></span><br><span class="line">    dom.classList.add(<span class="string">'box'</span>);</span><br><span class="line">    <span class="keyword">return</span> dom;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(createDomELement());</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装：<code>npm i -D style-loader css-loader</code></p>
</li>
<li><p>修改webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);   <span class="comment">//引用path模块</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//对外导出一个对象</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,    <span class="comment">//入口</span></span><br><span class="line">    mode: <span class="string">'development'</span>,        <span class="comment">//代表我们现在是开发阶段</span></span><br><span class="line">    output: &#123;                   <span class="comment">//输出</span></span><br><span class="line">        filename: <span class="string">'main.js'</span>,    <span class="comment">//最终打包后的文件名</span></span><br><span class="line">        path: path.resolve(__dirname,<span class="string">'dist'</span>)<span class="comment">//最终main.js在哪个文件夹下</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [                <span class="comment">//模块处理规则</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.css$/</span>,<span class="comment">//当引入的模块的后缀满足这个，就使用use的loader处理</span></span><br><span class="line">                use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>] <span class="comment">//处理顺序从右向左</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行<code>npx webpack</code>查看效果</p>
</li>
</ol>
<ul>
<li>拓展：修改package.json文件，可以用<code>npm run build</code>代替<code>npx webpack</code>  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",</span><br><span class="line">  "build": "npx webpack"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="3-webpack的模块和sass"><a href="#3-webpack的模块和sass" class="headerlink" title="3.webpack的模块和sass"></a>3.webpack的模块和sass</h1><blockquote>
<p><a href="https://www.webpackjs.com/configuration/module/#rule-test" target="_blank" rel="noopener">https://www.webpackjs.com/configuration/module/#rule-test</a></p>
<ul>
<li>加载sass需要sass-loader</li>
<li>sass-loader需要node-sass</li>
</ul>
</blockquote>
<ol>
<li><p>安装<code>npm i -D sass-loader node-sass</code><br>此处可能会有遇到node-sass安装失败的问题,详见：<a href="https://blog.csdn.net/qq_41445033/article/details/100032529" target="_blank" rel="noopener">https://blog.csdn.net/qq_41445033/article/details/100032529</a></p>
</li>
<li><p>修改webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);   <span class="comment">//引用path模块</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//对外导出一个对象</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,    <span class="comment">//入口</span></span><br><span class="line">    mode: <span class="string">'development'</span>,        <span class="comment">//代表我们现在是开发阶段</span></span><br><span class="line">    output: &#123;                   <span class="comment">//输出</span></span><br><span class="line">        filename: <span class="string">'main.js'</span>,    <span class="comment">//最终打包后的文件名</span></span><br><span class="line">        path: path.resolve(__dirname,<span class="string">'dist'</span>)<span class="comment">//最终main.js在哪个文件夹下</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [                <span class="comment">//模块处理规则</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(sc|c|sa)ss$/</span>,</span><br><span class="line">                <span class="comment">//当引入的模块的后缀满足这个，就使用use的loader处理</span></span><br><span class="line">                use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>,<span class="string">'sass-loader'</span>]</span><br><span class="line">                <span class="comment">//处理顺序从右向左</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>普通的css文件也可以经过sass-loader处理</li>
</ul>
<ol start="3">
<li><p>假设在style文件夹中添加一个a.scss文件</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$bgcolor:red;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: $bgcolor;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在index.js，导入a.scss</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'./style/a.scss'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>执行<code>npx webpack</code>查看效果</p>
</li>
</ol>
<h1 id="4-webpack的sass添加c3前缀和sourcemap处理"><a href="#4-webpack的sass添加c3前缀和sourcemap处理" class="headerlink" title="4.webpack的sass添加c3前缀和sourcemap处理"></a>4.webpack的sass添加c3前缀和sourcemap处理</h1><h2 id="Source-Map处理"><a href="#Source-Map处理" class="headerlink" title="Source Map处理"></a>Source Map处理</h2><ul>
<li>Source Map可以帮助我们在使用浏览器的开发者工具查看元素的样式时，追踪到样式的来源</li>
<li>如果没有开启source map，查看样式来源的时候只能看到来自<code>&lt;style&gt;&lt;/style&gt;</code></li>
</ul>
<p>方法：<br>修改webpack.config.js文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [<span class="comment">//模块处理规则</span></span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.(sc|c|sa)ss$/</span>,</span><br><span class="line">            <span class="comment">//当引入的模块的后缀满足这个，就使用use的loader处理</span></span><br><span class="line">            use: [<span class="comment">//处理顺序从后向前</span></span><br><span class="line">                <span class="string">'style-loader'</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                    loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        sourceMap: <span class="literal">true</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    loader: <span class="string">'sass-loader'</span>,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        sourceMap: <span class="literal">true</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="为样式添加前缀（-webkit-等等）"><a href="#为样式添加前缀（-webkit-等等）" class="headerlink" title="为样式添加前缀（-webkit-等等）"></a>为样式添加前缀（-webkit-等等）</h2><ul>
<li><p><a href="https://www.postcss.com.cn/" target="_blank" rel="noopener">PostCSS</a>是一个用 JavaScript 工具和插件转换 CSS 代码的工具，是一个css的预处理工具</p>
<ul>
<li>可以帮助我们<ul>
<li>给CSS3的属性添加前缀</li>
<li>样式格式校验（stylelint）</li>
<li>实现CSS的模块化，防止CSS样式冲突等</li>
</ul>
</li>
</ul>
</li>
<li><p>比较常用的就是使用 PostCSS 进行添加前缀，以此为例：</p>
<ol>
<li>安装postcss-loader<br> <code>npm i -D postcss-loader</code></li>
<li><p>接下来，我们需要引用什么插件，就要把什么插件装上,我们需要添加前缀<br> <code>npm install autoprefixer --save-dev</code></p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">npm i -D postcss-loader</span><br><span class="line">npm install autoprefixer --save-dev</span><br><span class="line"></span><br><span class="line"># 以下可以不用安装</span><br><span class="line"># cssnext可以让你写CSS4的语言，并能配合autoprefixer进行浏览器兼容的不全，而且还支持嵌套语法</span><br><span class="line">$ npm install postcss-cssnext --save-dev</span><br><span class="line"># 类似scss的语法，实际上如果只是想用嵌套的话有cssnext就够了</span><br><span class="line">$ npm install precss --save-dev</span><br><span class="line"># 在@import css文件的时候让webpack监听并编译</span><br><span class="line">$ npm install postcss-import --save-dev</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改webpack.config.js文件</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [                <span class="comment">//模块处理规则</span></span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.(sc|c|sa)ss$/</span>,</span><br><span class="line">            <span class="comment">//当引入的模块的后缀满足这个，就使用use的loader处理</span></span><br><span class="line">            use: [<span class="comment">//处理顺序从后向前</span></span><br><span class="line">                <span class="string">'style-loader'</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                    loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        sourceMap: <span class="literal">true</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        ident: <span class="string">'postcss'</span>,</span><br><span class="line">                        sourceMap: <span class="literal">true</span>,</span><br><span class="line">                        plugins: <span class="function"><span class="params">loader</span> =&gt;</span> [</span><br><span class="line">                            <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123; <span class="attr">browsers</span>: [<span class="string">'&gt; 0.15% in CN'</span>] &#125;) <span class="comment">// 添加前缀</span></span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    loader: <span class="string">'sass-loader'</span>,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        sourceMap: <span class="literal">true</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改a.sass</p>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$bgcolor:red;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: $bgcolor;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>运行查看效果,F12看样式，可以看到</p>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<h1 id="5-webpack的css提取成单独的文件"><a href="#5-webpack的css提取成单独的文件" class="headerlink" title="5.webpack的css提取成单独的文件"></a>5.webpack的css提取成单独的文件</h1><ul>
<li>抽取了样式，就不能再用 style-loader 注入到 html 中了。</li>
<li>webpack4 开始使用： mini-css-extract-plugin插件, 1-3 的版本可以用：extract-text-webpack-plugin</li>
<li>webpack.config.js中的 <code>mode</code> 必须设置为 <code>production</code>，插件才有用；在开发阶段的话就用style-loader就可以了</li>
</ul>
<ol>
<li>安装<code>npm install --save-dev mini-css-extract-plugin</code></li>
<li><p>在根目录下新建配置文件<code>webpack.product.config.js</code>，即开发阶段和生成最终dist版本用两个不同的配置文件</p>
<ul>
<li>将webpack.config.js的内容粘贴进去</li>
<li>引入mini-css-extract-plugin</li>
<li>替换style-loader</li>
<li>更改mode<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,    <span class="comment">//入口</span></span><br><span class="line">    mode: <span class="string">'production'</span>,</span><br><span class="line">    output: &#123;                   <span class="comment">//输出</span></span><br><span class="line">        filename: <span class="string">'main.js'</span>,    <span class="comment">//最终打包后的文件名</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>)<span class="comment">//最终main.js在哪个文件夹下</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [                <span class="comment">//模块处理规则</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(sc|c|sa)ss$/</span>,</span><br><span class="line">                <span class="comment">//当引入的模块的后缀满足这个，就使用use的loader处理</span></span><br><span class="line">                use: [<span class="comment">//处理顺序从后向前</span></span><br><span class="line">                    MiniCssExtractPlugin.loader,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            ident: <span class="string">'postcss'</span>,</span><br><span class="line">                            sourceMap: <span class="literal">true</span>,</span><br><span class="line">                            plugins: <span class="function"><span class="params">loader</span> =&gt;</span> [</span><br><span class="line">                                <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123; <span class="attr">browsers</span>: [<span class="string">'&gt; 0.15% in CN'</span>] &#125;) <span class="comment">// 添加前缀</span></span><br><span class="line">                            ]</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'sass-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            <span class="comment">// filename: devMode ? '[name].css' : '[name].[hash].css', //判断了是什么模式</span></span><br><span class="line">            <span class="comment">// chunkFilename: devMode ? '[id].css' : '[id].[hash].css'</span></span><br><span class="line">            </span><br><span class="line">            filename: <span class="string">'[name].css'</span>, <span class="comment">// 设置最终输出的文件名，与output中filename一样</span></span><br><span class="line">            chunkFilename:<span class="string">'[id].css'</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="3">
<li><code>npx webpack -h</code>可以看webpack的帮助，可看到<code>--config</code>webpack默认配置文件</li>
<li>终端执行<code>npx webpack --config webpack.product.config.js</code>（敲到webpack.p，按Tab可自动补全名称）</li>
<li><p>考虑到4的指令可能需要执行多次，可在package.json中添加，如果是npm run build，默认使用的配置文件仍然是webpack.config.js，npm run dist时才使用webpack.product.config.js配置文件</p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  "scripts": &#123;</span><br><span class="line">    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",</span><br><span class="line">    "build": "npx webpack",</span><br><span class="line">    "dist":"npx webpack --config webpack.product.config.js"</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行4后，可见dist中出现了一个main.css文件</p>
</li>
</ol>
</li>
</ol>
<ul>
<li>如果plugins中，输出文件制定了哈希值，<code>filename: &#39;[name].[hash].css&#39;</code>，生成的main.css会变成mainxxxxxxxxxx.css，xxxxxxxxxx是这次打包的哈希值，是唯一标识符</li>
<li>想引用新生成的main.css，要在index.html文件中引用一下</li>
</ul>
<h1 id="6-webpack的css和js压缩插件使用"><a href="#6-webpack的css和js压缩插件使用" class="headerlink" title="6.webpack的css和js压缩插件使用"></a>6.webpack的css和js压缩插件使用</h1><h2 id="压缩CSS"><a href="#压缩CSS" class="headerlink" title="压缩CSS"></a>压缩CSS</h2><ul>
<li>webpack4压缩CSS需要安装插件</li>
</ul>
<ol>
<li>安装css插件optimize-css-assets-webpack-plugin<br> <code>npm i -D optimize-css-assets-webpack-plugin</code></li>
<li><p>修改webpack.product.config.js配置文件</p>
<ul>
<li>引入mini-css-extract-plugin</li>
<li>添加optimization<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> OptimizeCSSAssetsPlugin = <span class="built_in">require</span>(<span class="string">'optimize-css-assets-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,    <span class="comment">//入口</span></span><br><span class="line">    mode: <span class="string">'production'</span>,</span><br><span class="line">    output: &#123;                   <span class="comment">//输出</span></span><br><span class="line">        filename: <span class="string">'main.js'</span>,    <span class="comment">//最终打包后的文件名</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>)<span class="comment">//最终main.js在哪个文件夹下</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [                <span class="comment">//模块处理规则</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(sc|c|sa)ss$/</span>,</span><br><span class="line">                <span class="comment">//当引入的模块的后缀满足这个，就使用use的loader处理</span></span><br><span class="line">                use: [<span class="comment">//处理顺序从后向前</span></span><br><span class="line">                    MiniCssExtractPlugin.loader,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            ident: <span class="string">'postcss'</span>,</span><br><span class="line">                            sourceMap: <span class="literal">true</span>,</span><br><span class="line">                            plugins: <span class="function"><span class="params">loader</span> =&gt;</span> [</span><br><span class="line">                                <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123; <span class="attr">browsers</span>: [<span class="string">'&gt; 0.15% in CN'</span>] &#125;) <span class="comment">// 添加前缀</span></span><br><span class="line">                            ]</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'sass-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            <span class="comment">// filename: devMode ? '[name].css' : '[name].[hash].css', //判断了是什么模式</span></span><br><span class="line">            <span class="comment">// chunkFilename: devMode ? '[id].css' : '[id].[hash].css'</span></span><br><span class="line"></span><br><span class="line">            filename: <span class="string">'[name].css'</span>, <span class="comment">// 设置最终输出的文件名</span></span><br><span class="line">            chunkFilename:<span class="string">'[id].css'</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        minimizer: [<span class="keyword">new</span> OptimizeCSSAssetsPlugin(&#123;&#125;)]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><code>npm run dist</code>,查看main.css，css代码都变成了一行，压缩成功</p>
</li>
</ol>
<h2 id="压缩JS"><a href="#压缩JS" class="headerlink" title="压缩JS"></a>压缩JS</h2><ul>
<li>压缩js需要一个插件：uglifyjs-webpack-plugin, 此插件需要一个前提就是：mode: ‘production’</li>
</ul>
<ol>
<li>安装<code>npm i -D uglifyjs-webpack-plugin</code></li>
<li><p>修改webpack.product.config.js配置文件</p>
<ul>
<li>引入uglifyjs-webpack-plugin</li>
<li>在optimization的minimizer中引用插件<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    optimization: &#123;</span><br><span class="line">    minimizer: [</span><br><span class="line">        <span class="keyword">new</span> OptimizeCSSAssetsPlugin(&#123;&#125;),<span class="comment">//压缩CSS</span></span><br><span class="line">        <span class="keyword">new</span> UglifyJsPlugin(&#123;            <span class="comment">//压缩JS</span></span><br><span class="line">        cache: <span class="literal">true</span>,</span><br><span class="line">        parallel: <span class="literal">true</span>,</span><br><span class="line">        sourceMap: <span class="literal">true</span> <span class="comment">// set to true if you want JS source maps</span></span><br><span class="line">    &#125;)]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><code>npm run dist</code>,此处出现错误</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR in main.js from UglifyJs Unexpected token: name «dom», expected: punc «;» [./src/index.js:6,0][main.js:17215,8]</span><br></pre></td></tr></table></figure>
<ul>
<li>是因为es6需要转成es5在给webpack打包，快速解决方法是把index.js中的let改成var，再次执行，查看main.js，代码被压缩了</li>
<li>若想使用es6语法，要先将代码转换为es5，详见<a href="#14.webpack的代理服务器设置和bable转换及优化">14</a></li>
</ul>
</li>
</ol>
<h1 id="7-解决文件名带哈希值的问题"><a href="#7-解决文件名带哈希值的问题" class="headerlink" title="7.解决文件名带哈希值的问题"></a>7.解决文件名带哈希值的问题</h1><h2 id="为什么要让文件带上哈希值？"><a href="#为什么要让文件带上哈希值？" class="headerlink" title="为什么要让文件带上哈希值？"></a>为什么要让文件带上哈希值？</h2><ul>
<li>因为有时候在生产的时候会遇到缓存问题。如果是相同的css/js文件，虽然文件内容是更新了，但是由于浏览器的缓存问题，可能会出现问题，所以一般都会给css/js静态文件打上版本</li>
</ul>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><p>修改webpack.product.config.js文件</p>
<ul>
<li>js文件输出:<br>  <code>filename: &#39;main.[hash].js&#39;,    //最终打包后的文件名</code></li>
<li>css文件输出：  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">filename: &apos;[name][hash].css&apos;, // 设置最终输出的文件名</span><br><span class="line">chunkFilename: &apos;[id][hash].css&apos;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h2><ul>
<li>由于每次打包生成的文件名都不一样，所以将js/css文件引入html中的文件也不一样</li>
<li><code>HtmlWebpackPlugin</code>插件，可以把打包后的 CSS 或者 JS 文件引用直接注入到 HTML 模板中，这样就不用每次手动修改文件引用了。</li>
</ul>
<ol>
<li>安装<br> <code>npm install --save-dev html-webpack-plugin</code></li>
<li><p>修改webpack.product.config.js配置文件中的引入及plugins，从而引用插件</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> UglifyJsPlugin = <span class="built_in">require</span>(<span class="string">'uglifyjs-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> OptimizeCSSAssetsPlugin = <span class="built_in">require</span>(<span class="string">'optimize-css-assets-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,    <span class="comment">//入口</span></span><br><span class="line">    mode: <span class="string">'production'</span>,</span><br><span class="line">    output: &#123;                   <span class="comment">//输出</span></span><br><span class="line">        filename: <span class="string">'main.[hash].js'</span>,    <span class="comment">//最终打包后的文件名</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>)<span class="comment">//最终main.js在哪个文件夹下</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [                <span class="comment">//模块处理规则</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(sc|c|sa)ss$/</span>,</span><br><span class="line">                <span class="comment">//当引入的模块的后缀满足这个，就使用use的loader处理</span></span><br><span class="line">                use: [<span class="comment">//处理顺序从后向前</span></span><br><span class="line">                    MiniCssExtractPlugin.loader,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            ident: <span class="string">'postcss'</span>,</span><br><span class="line">                            sourceMap: <span class="literal">true</span>,</span><br><span class="line">                            plugins: <span class="function"><span class="params">loader</span> =&gt;</span> [</span><br><span class="line">                                <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123; <span class="attr">browsers</span>: [<span class="string">'&gt; 0.15% in CN'</span>] &#125;) <span class="comment">// 添加前缀</span></span><br><span class="line">                            ]</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'sass-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: <span class="string">'[name][hash].css'</span>, <span class="comment">// 设置最终输出的文件名</span></span><br><span class="line">            chunkFilename: <span class="string">'[id][hash].css'</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            title: <span class="string">'学习webpack4.0 demo'</span>, <span class="comment">// 默认值：Webpack App</span></span><br><span class="line">            filename: <span class="string">'main.html'</span>, <span class="comment">// 最终生成的dist中的文件的名字，默认值： 'index.html'文件名</span></span><br><span class="line">            template: path.resolve(__dirname, <span class="string">'src/main.html'</span>),<span class="comment">//这里可以给它加模版文件，可以是index.html，也可以指定具体文件</span></span><br><span class="line">            minify: &#123;</span><br><span class="line">                collapseWhitespace: <span class="literal">true</span>,   <span class="comment">//是否去掉空格</span></span><br><span class="line">                removeComments: <span class="literal">true</span>,       <span class="comment">//是否移除注释</span></span><br><span class="line">                removeAttributeQuotes: <span class="literal">true</span> <span class="comment">// 移除属性的引号</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        minimizer: [</span><br><span class="line">            <span class="keyword">new</span> OptimizeCSSAssetsPlugin(&#123;&#125;),<span class="comment">//压缩CSS</span></span><br><span class="line">            <span class="keyword">new</span> UglifyJsPlugin(&#123;            <span class="comment">//压缩JS</span></span><br><span class="line">            cache: <span class="literal">true</span>,</span><br><span class="line">            parallel: <span class="literal">true</span>,</span><br><span class="line">            sourceMap: <span class="literal">true</span> <span class="comment">// set to true if you want JS source maps</span></span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>设置模版文件：<ul>
<li>假设在src目录下新建一个main.html</li>
<li>修改main.html内容  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"ie=edge"</span>&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=<span class="string">"demo"</span>&gt;我是模版文件自带的内容&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>执行<code>npm run dist</code>，查看效果，可见dist中生成了main.html文件，且引入了css和js文件</p>
</li>
</ol>
<h1 id="8-清理dist目录插件clean-webpack-plugin应用"><a href="#8-清理dist目录插件clean-webpack-plugin应用" class="headerlink" title="8.清理dist目录插件clean-webpack-plugin应用"></a>8.清理dist目录插件clean-webpack-plugin应用</h1><ul>
<li>每次构建，我们的 /dist 文件夹都会保存生成的文件，然后就会非常杂乱。</li>
<li>通常，在每次构建前清理 /dist 文件夹，是比较推荐的做法</li>
<li><code>clean-webpack-plugin</code> 是一个比较普及的管理插件。</li>
</ul>
<ol>
<li>安装<br> <code>npm install clean-webpack-plugin --save-dev</code></li>
<li><p>修改webpack.config.js/webpack.product.config.js</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line">+ <span class="keyword">const</span> CleanWebpackPlugin = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: &#123;</span><br><span class="line">    app: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    print: <span class="string">'./src/print.js'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">+ <span class="keyword">new</span> CleanWebpackPlugin([<span class="string">'dist'</span>])  <span class="comment">//想清理其他目录也可以修改名字</span></span><br><span class="line">    ],</span><br><span class="line">    output: &#123;</span><br><span class="line">    filename: <span class="string">'[name].bundle.js'</span>,</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行<code>npm run dist</code>，查看效果。</p>
<ul>
<li>此处发现产生报错，因为新版本的CleanWebpackPlugin用法变了，详见<a href="https://blog.csdn.net/qq_36242361/article/details/90709258" target="_blank" rel="noopener">https://blog.csdn.net/qq_36242361/article/details/90709258</a></li>
</ul>
</li>
</ol>
<h1 id="9-图片处理及优化"><a href="#9-图片处理及优化" class="headerlink" title="9.图片处理及优化"></a>9.图片处理及优化</h1><ul>
<li>在src文件夹下新建assets文件夹，assets内新建img文件夹，img内放置几张照片</li>
<li><p>在a.scss中添加background一行</p>
  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$bgcolor:red;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: $bgcolor;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">'../assets/img/01.jpg'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>打包时解析sass模块的时候，会认为background这里引入的是一个新的模块，这个模块的文件名是jpg，默认处理不了，会报错  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ERROR in ./src/assets/img/01.jpg 1:0</span><br><span class="line">Module parse failed: Unexpected character &apos;�&apos; (1:0)</span><br><span class="line">You may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="file-loader处理文件的导入"><a href="#file-loader处理文件的导入" class="headerlink" title="file-loader处理文件的导入"></a>file-loader处理文件的导入</h2><ol>
<li>安装<br> <code>npm install --save-dev file-loader</code></li>
<li><p>修改配置文件webpack.product.config.js，注意添加的位置</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> UglifyJsPlugin = <span class="built_in">require</span>(<span class="string">'uglifyjs-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> OptimizeCSSAssetsPlugin = <span class="built_in">require</span>(<span class="string">'optimize-css-assets-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">"clean-webpack-plugin"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,    <span class="comment">//入口</span></span><br><span class="line">    mode: <span class="string">'production'</span>,</span><br><span class="line">    output: &#123;                   <span class="comment">//输出</span></span><br><span class="line">        filename: <span class="string">'main.[hash].js'</span>,    <span class="comment">//最终打包后的文件名</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>)<span class="comment">//最终main.js在哪个文件夹下</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [                <span class="comment">//模块处理规则</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(png|svg|jpg|gif|jpeg|ico)$/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    <span class="string">'file-loader'</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(sc|c|sa)ss$/</span>,</span><br><span class="line">                <span class="comment">//当引入的模块的后缀满足这个，就使用use的loader处理</span></span><br><span class="line">                use: [<span class="comment">//处理顺序从后向前</span></span><br><span class="line">                    MiniCssExtractPlugin.loader,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            ident: <span class="string">'postcss'</span>,</span><br><span class="line">                            sourceMap: <span class="literal">true</span>,</span><br><span class="line">                            plugins: <span class="function"><span class="params">loader</span> =&gt;</span> [</span><br><span class="line">                                <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123; <span class="attr">browsers</span>: [<span class="string">'&gt; 0.15% in CN'</span>] &#125;) <span class="comment">// 添加前缀</span></span><br><span class="line">                            ]</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'sass-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: <span class="string">'[name][hash].css'</span>, <span class="comment">// 设置最终输出的文件名</span></span><br><span class="line">            chunkFilename: <span class="string">'[id][hash].css'</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            title: <span class="string">'学习webpack4.0 demo'</span>, <span class="comment">// 默认值：Webpack App</span></span><br><span class="line">            filename: <span class="string">'main.html'</span>, <span class="comment">// 最终生成的dist中的文件的名字，默认值： 'index.html'文件名</span></span><br><span class="line">            template: path.resolve(__dirname, <span class="string">'src/main.html'</span>),<span class="comment">//这里可以给它加模版文件，可以是index.html，也可以指定具体文件</span></span><br><span class="line">            minify: &#123;</span><br><span class="line">                collapseWhitespace: <span class="literal">true</span>,   <span class="comment">//是否去掉空格</span></span><br><span class="line">                removeComments: <span class="literal">true</span>,       <span class="comment">//是否移除注释</span></span><br><span class="line">                removeAttributeQuotes: <span class="literal">true</span> <span class="comment">// 移除属性的引号</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> CleanWebpackPlugin()</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        minimizer: [</span><br><span class="line">            <span class="keyword">new</span> OptimizeCSSAssetsPlugin(&#123;&#125;),<span class="comment">//压缩CSS</span></span><br><span class="line">            <span class="keyword">new</span> UglifyJsPlugin(&#123;            <span class="comment">//压缩JS</span></span><br><span class="line">                cache: <span class="literal">true</span>,</span><br><span class="line">                parallel: <span class="literal">true</span>,</span><br><span class="line">                sourceMap: <span class="literal">true</span> <span class="comment">// set to true if you want JS source maps</span></span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改一下src下的main.js，添加一个使用.box的div</p>
</li>
<li>执行<code>npm run dist</code>，可见dist中生成了一个图片文件</li>
</ol>
<h2 id="优化图片，使用image-webpack-loader可以帮助我们对图片进行压缩和优化。"><a href="#优化图片，使用image-webpack-loader可以帮助我们对图片进行压缩和优化。" class="headerlink" title="优化图片，使用image-webpack-loader可以帮助我们对图片进行压缩和优化。"></a>优化图片，使用image-webpack-loader可以帮助我们对图片进行压缩和优化。</h2><ol>
<li>安装<br> <code>npm install image-webpack-loader --save-dev</code></li>
<li><p>修改webpack.product.config.js</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> UglifyJsPlugin = <span class="built_in">require</span>(<span class="string">'uglifyjs-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> OptimizeCSSAssetsPlugin = <span class="built_in">require</span>(<span class="string">'optimize-css-assets-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">"clean-webpack-plugin"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,    <span class="comment">//入口</span></span><br><span class="line">    mode: <span class="string">'production'</span>,</span><br><span class="line">    output: &#123;                   <span class="comment">//输出</span></span><br><span class="line">        filename: <span class="string">'main.[hash].js'</span>,    <span class="comment">//最终打包后的文件名</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>)<span class="comment">//最终main.js在哪个文件夹下</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [                <span class="comment">//模块处理规则</span></span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(sc|c|sa)ss$/</span>,</span><br><span class="line">                <span class="comment">//当引入的模块的后缀满足这个，就使用use的loader处理</span></span><br><span class="line">                use: [<span class="comment">//处理顺序从后向前</span></span><br><span class="line">                    MiniCssExtractPlugin.loader,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            ident: <span class="string">'postcss'</span>,</span><br><span class="line">                            sourceMap: <span class="literal">true</span>,</span><br><span class="line">                            plugins: <span class="function"><span class="params">loader</span> =&gt;</span> [</span><br><span class="line">                                <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123; <span class="attr">browsers</span>: [<span class="string">'&gt; 0.15% in CN'</span>] &#125;) <span class="comment">// 添加前缀</span></span><br><span class="line">                            ]</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'sass-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(png|svg|jpg|gif|jpeg|ico)$/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    <span class="string">'file-loader'</span>,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'image-webpack-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            mozjpeg: &#123;</span><br><span class="line">                                progressive: <span class="literal">true</span>,</span><br><span class="line">                                quality: <span class="number">65</span></span><br><span class="line">                            &#125;,</span><br><span class="line">                            optipng: &#123;</span><br><span class="line">                                enabled: <span class="literal">false</span>,</span><br><span class="line">                            &#125;,</span><br><span class="line">                            pngquant: &#123;</span><br><span class="line">                                quality: <span class="string">'65-90'</span>,</span><br><span class="line">                                speed: <span class="number">4</span></span><br><span class="line">                            &#125;,</span><br><span class="line">                            gifsicle: &#123;</span><br><span class="line">                                interlaced: <span class="literal">false</span>,</span><br><span class="line">                            &#125;,</span><br><span class="line">                            webp: &#123;</span><br><span class="line">                                quality: <span class="number">75</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line"></span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: <span class="string">'[name][hash].css'</span>, <span class="comment">// 设置最终输出的文件名</span></span><br><span class="line">            chunkFilename: <span class="string">'[id][hash].css'</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            title: <span class="string">'学习webpack4.0 demo'</span>, <span class="comment">// 默认值：Webpack App</span></span><br><span class="line">            filename: <span class="string">'main.html'</span>, <span class="comment">// 最终生成的dist中的文件的名字，默认值： 'index.html'文件名</span></span><br><span class="line">            template: path.resolve(__dirname, <span class="string">'src/main.html'</span>),<span class="comment">//这里可以给它加模版文件，可以是index.html，也可以指定具体文件</span></span><br><span class="line">            minify: &#123;</span><br><span class="line">                collapseWhitespace: <span class="literal">true</span>,   <span class="comment">//是否去掉空格</span></span><br><span class="line">                removeComments: <span class="literal">true</span>,       <span class="comment">//是否移除注释</span></span><br><span class="line">                removeAttributeQuotes: <span class="literal">true</span> <span class="comment">// 移除属性的引号</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> CleanWebpackPlugin()</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        minimizer: [</span><br><span class="line">            <span class="keyword">new</span> OptimizeCSSAssetsPlugin(&#123;&#125;),<span class="comment">//压缩CSS</span></span><br><span class="line">            <span class="keyword">new</span> UglifyJsPlugin(&#123;            <span class="comment">//压缩JS</span></span><br><span class="line">                cache: <span class="literal">true</span>,</span><br><span class="line">                parallel: <span class="literal">true</span>,</span><br><span class="line">                sourceMap: <span class="literal">true</span> <span class="comment">// set to true if you want JS source maps</span></span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>npm run dist</code></p>
</li>
</ol>
<h1 id="10-图片base64优化和字体处理"><a href="#10-图片base64优化和字体处理" class="headerlink" title="10.图片base64优化和字体处理"></a>10.图片base64优化和字体处理</h1><ul>
<li><code>url-loader</code>功能类似于 file-loader，可以把 url 地址对应的文件，打包成 base64 的 DataURL，减少图片请求，提高访问的效率。</li>
<li>处理的图片不能太大</li>
</ul>
<ol>
<li>安装<br> <code>npm install --save-dev url-loader</code></li>
<li><p>修改配置文件，安装成功后，就不需要用file-loader了，改用url-loader,将use里的<code>&#39;file-loader&#39;</code>用一个对象取代</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> UglifyJsPlugin = <span class="built_in">require</span>(<span class="string">'uglifyjs-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> OptimizeCSSAssetsPlugin = <span class="built_in">require</span>(<span class="string">'optimize-css-assets-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">"clean-webpack-plugin"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,    <span class="comment">//入口</span></span><br><span class="line">    mode: <span class="string">'production'</span>,</span><br><span class="line">    output: &#123;                   <span class="comment">//输出</span></span><br><span class="line">        filename: <span class="string">'main.[hash].js'</span>,    <span class="comment">//最终打包后的文件名</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>)<span class="comment">//最终main.js在哪个文件夹下</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [                <span class="comment">//模块处理规则</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(png|svg|jpg|gif|jpeg|ico)$/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'url-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            limit:<span class="number">90000</span> <span class="comment">//设置大小多少以内的图片，引用是要转化为base64的链接</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(sc|c|sa)ss$/</span>,</span><br><span class="line">                <span class="comment">//当引入的模块的后缀满足这个，就使用use的loader处理</span></span><br><span class="line">                use: [<span class="comment">//处理顺序从后向前</span></span><br><span class="line">                    MiniCssExtractPlugin.loader,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            ident: <span class="string">'postcss'</span>,</span><br><span class="line">                            sourceMap: <span class="literal">true</span>,</span><br><span class="line">                            plugins: <span class="function"><span class="params">loader</span> =&gt;</span> [</span><br><span class="line">                                <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123; <span class="attr">browsers</span>: [<span class="string">'&gt; 0.15% in CN'</span>] &#125;) <span class="comment">// 添加前缀</span></span><br><span class="line">                            ]</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'sass-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: <span class="string">'[name][hash].css'</span>, <span class="comment">// 设置最终输出的文件名</span></span><br><span class="line">            chunkFilename: <span class="string">'[id][hash].css'</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            title: <span class="string">'学习webpack4.0 demo'</span>, <span class="comment">// 默认值：Webpack App</span></span><br><span class="line">            filename: <span class="string">'main.html'</span>, <span class="comment">// 最终生成的dist中的文件的名字，默认值： 'index.html'文件名</span></span><br><span class="line">            template: path.resolve(__dirname, <span class="string">'src/main.html'</span>),<span class="comment">//这里可以给它加模版文件，可以是index.html，也可以指定具体文件</span></span><br><span class="line">            minify: &#123;</span><br><span class="line">                collapseWhitespace: <span class="literal">true</span>,   <span class="comment">//是否去掉空格</span></span><br><span class="line">                removeComments: <span class="literal">true</span>,       <span class="comment">//是否移除注释</span></span><br><span class="line">                removeAttributeQuotes: <span class="literal">true</span> <span class="comment">// 移除属性的引号</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> CleanWebpackPlugin()</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        minimizer: [</span><br><span class="line">            <span class="keyword">new</span> OptimizeCSSAssetsPlugin(&#123;&#125;),<span class="comment">//压缩CSS</span></span><br><span class="line">            <span class="keyword">new</span> UglifyJsPlugin(&#123;            <span class="comment">//压缩JS</span></span><br><span class="line">                cache: <span class="literal">true</span>,</span><br><span class="line">                parallel: <span class="literal">true</span>,</span><br><span class="line">                sourceMap: <span class="literal">true</span> <span class="comment">// set to true if you want JS source maps</span></span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>这里本来应该加上<code>&#39;image-webpack-loader&#39;</code>的配置的，但是因为频繁报错，就先删掉了。</li>
<li>排查过发现可能是<code>&#39;image-webpack-loader&#39;</code>原来的配置和<code>url-loader</code>一起用后有冲突，在学第11的时候基本把问题解决了，详见<a href="#11.webpack的配置合并、提前公共配置">下一节的第六步</a></li>
</ul>
</li>
</ol>
<h1 id="11-webpack的配置合并、提前公共配置"><a href="#11-webpack的配置合并、提前公共配置" class="headerlink" title="11.webpack的配置合并、提前公共配置"></a>11.webpack的配置合并、提前公共配置</h1><ul>
<li>开发阶段与生产阶段所需配置不完全相同，如果想把公共配置提到一起，需要工具帮忙。</li>
<li><code>webpack-merge</code>的工具可以实现两个配置文件的合并，这样我们可以把开发环境和生产环境的公共配置抽取到一个公共的配置文件中。</li>
</ul>
<ol>
<li>安装<br> <code>npm install --save-dev webpack-merge</code></li>
<li>改造配置文件<ul>
<li>webpack.dev.js</li>
<li>webpack.product.js/webpack.prod.js</li>
<li>webpack.common.js</li>
</ul>
</li>
<li><p>将product的配置文件都拷贝到common里，修改webpack.common.js，留下开发阶段和生产阶段的公共部分</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> UglifyJsPlugin = <span class="built_in">require</span>(<span class="string">'uglifyjs-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> OptimizeCSSAssetsPlugin = <span class="built_in">require</span>(<span class="string">'optimize-css-assets-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">"clean-webpack-plugin"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(png|svg|jpg|gif|jpeg|ico)$/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'url-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            limit: <span class="number">90000</span> <span class="comment">//设置大小多少以内的图片，引用是要转化为base64的链接</span></span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'image-webpack-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            mozjpeg: &#123;</span><br><span class="line">                                progressive: <span class="literal">true</span>,</span><br><span class="line">                                quality: <span class="number">65</span></span><br><span class="line">                            &#125;,</span><br><span class="line">                            optipng: &#123;</span><br><span class="line">                                enabled: <span class="literal">false</span>,</span><br><span class="line">                            &#125;,</span><br><span class="line">                            pngquant: &#123;</span><br><span class="line">                                quality: <span class="string">'65-90'</span>,</span><br><span class="line">                                speed: <span class="number">4</span></span><br><span class="line">                            &#125;,</span><br><span class="line">                            gifsicle: &#123;</span><br><span class="line">                                interlaced: <span class="literal">false</span>,</span><br><span class="line">                            &#125;,</span><br><span class="line">                            webp: &#123;</span><br><span class="line">                                quality: <span class="number">75</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            title: <span class="string">'学习webpack4.0 demo'</span>, <span class="comment">// 默认值：Webpack App</span></span><br><span class="line">            filename: <span class="string">'main.html'</span>, <span class="comment">// 最终生成的dist中的文件的名字，默认值： 'index.html'文件名</span></span><br><span class="line">            template: path.resolve(__dirname, <span class="string">'src/main.html'</span>),<span class="comment">//这里可以给它加模版文件，可以是index.html，也可以指定具体文件</span></span><br><span class="line">            minify: &#123;</span><br><span class="line">                collapseWhitespace: <span class="literal">true</span>,   <span class="comment">//是否去掉空格</span></span><br><span class="line">                removeComments: <span class="literal">true</span>,       <span class="comment">//是否移除注释</span></span><br><span class="line">                removeAttributeQuotes: <span class="literal">true</span> <span class="comment">// 移除属性的引号</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> CleanWebpackPlugin()</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改webpack.dev.js，留下独有部分，适当改写</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);   <span class="comment">//引用path模块</span></span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="keyword">const</span> common=<span class="built_in">require</span>(<span class="string">'./webpack.common'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//对外导出一个对象</span></span><br><span class="line"><span class="keyword">let</span> devConfig = &#123;</span><br><span class="line">    mode: <span class="string">'development'</span>,        <span class="comment">//代表我们现在是开发阶段</span></span><br><span class="line">    output: &#123;                   <span class="comment">//输出</span></span><br><span class="line">        filename: <span class="string">'main.js'</span>,    <span class="comment">//最终打包后的文件名</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>)<span class="comment">//最终main.js在哪个文件夹下</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [                <span class="comment">//模块处理规则</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(sc|c|sa)ss$/</span>,</span><br><span class="line">                <span class="comment">//当引入的模块的后缀满足这个，就使用use的loader处理</span></span><br><span class="line">                use: [<span class="comment">//处理顺序从后向前</span></span><br><span class="line">                    <span class="string">'style-loader'</span>,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            ident: <span class="string">'postcss'</span>,</span><br><span class="line">                            sourceMap: <span class="literal">true</span>,</span><br><span class="line">                            plugins: <span class="function"><span class="params">loader</span> =&gt;</span> [</span><br><span class="line">                                <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123; <span class="attr">browsers</span>: [<span class="string">'&gt; 0.15% in CN'</span>] &#125;) <span class="comment">// 添加前缀</span></span><br><span class="line">                            ]</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'sass-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = merge(common,devConfig);</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改package.json中的script，修改默认执行的配置文件</p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  "scripts": &#123;</span><br><span class="line">    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",</span><br><span class="line">    "build": "npx webpack --config webpack.dev.js",</span><br><span class="line">    "dist": "npx webpack --config webpack.prod.js"</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>npm run build</code>，有报错，后来不断尝试发现，是<code>&#39;image-webpack-loader&#39;</code>原来的配置中的webp未能正常把图片进行转换</p>
<ul>
<li><p>报错内容</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ERROR in ./src/assets/img/01.jpg</span><br><span class="line">Module build failed (from ./node_modules/image-webpack-loader/index.js):</span><br><span class="line">Error: CoCreateInstance(MAKE_REFGUID(CLSID_WICImagingFactory), NULL, CLSCTX_INPROC_SERVER, MAKE_REFGUID(IID_IWICImagingFactory), (LPVOID*)&amp;factory) failed 80040154</span><br><span class="line">Couldn&apos;t access Windows Imaging Component (are you running Windows XP SP3 or newer?). Most formats not available. Use -s for the available YUV input.</span><br><span class="line">Decoding of input data failed.</span><br><span class="line">Status: 3(BITSTREAM_ERROR)</span><br><span class="line">Error! Could not process file C:\Users\ADMINI~1\AppData\Local\Temp\89c3cc73-dbc6-49f7-8b9d-c0d0b66c8aad</span><br><span class="line">Error! Cannot read input picture file &apos;C:\Users\ADMINI~1\AppData\Local\Temp\89c3cc73-dbc6-49f7-8b9d-c0d0b66c8aad&apos;</span><br></pre></td></tr></table></figure>
</li>
<li><p>解决方法：修改webpack.common.js，将<code>&#39;image-webpack-loader&#39;</code>原来的配置中的webp删除 </p>
</li>
<li>参考：<a href="https://www.npmjs.com/package/image-webpack-loader" target="_blank" rel="noopener">https://www.npmjs.com/package/image-webpack-loader</a></li>
<li>若仍想将图片转换成webp格式，可以试试<a href="https://stackoverflow.com/questions/53483962/webpack-encore-convert-images-to-webp-using-image-webpack-loader" target="_blank" rel="noopener">https://stackoverflow.com/questions/53483962/webpack-encore-convert-images-to-webp-using-image-webpack-loader</a></li>
</ul>
</li>
<li><p>修改webpack.prod.js，留下独有部分，适当改写</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> UglifyJsPlugin = <span class="built_in">require</span>(<span class="string">'uglifyjs-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> OptimizeCSSAssetsPlugin = <span class="built_in">require</span>(<span class="string">'optimize-css-assets-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">"clean-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">'./webpack.common'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> prodConfig = &#123;</span><br><span class="line">    mode: <span class="string">'production'</span>,</span><br><span class="line">    output: &#123;                   <span class="comment">//输出</span></span><br><span class="line">        filename: <span class="string">'main.[hash].js'</span>,    <span class="comment">//最终打包后的文件名</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>)<span class="comment">//最终main.js在哪个文件夹下</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [                <span class="comment">//模块处理规则</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(sc|c|sa)ss$/</span>,</span><br><span class="line">                <span class="comment">//当引入的模块的后缀满足这个，就使用use的loader处理</span></span><br><span class="line">                use: [<span class="comment">//处理顺序从后向前</span></span><br><span class="line">                    MiniCssExtractPlugin.loader,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            ident: <span class="string">'postcss'</span>,</span><br><span class="line">                            sourceMap: <span class="literal">true</span>,</span><br><span class="line">                            plugins: <span class="function"><span class="params">loader</span> =&gt;</span> [</span><br><span class="line">                                <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123; <span class="attr">browsers</span>: [<span class="string">'&gt; 0.15% in CN'</span>] &#125;) <span class="comment">// 添加前缀</span></span><br><span class="line">                            ]</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'sass-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: <span class="string">'[name][hash].css'</span>, <span class="comment">// 设置最终输出的文件名</span></span><br><span class="line">            chunkFilename: <span class="string">'[id][hash].css'</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        minimizer: [</span><br><span class="line">            <span class="keyword">new</span> OptimizeCSSAssetsPlugin(&#123;&#125;),<span class="comment">//压缩CSS</span></span><br><span class="line">            <span class="keyword">new</span> UglifyJsPlugin(&#123;            <span class="comment">//压缩JS</span></span><br><span class="line">                cache: <span class="literal">true</span>,</span><br><span class="line">                parallel: <span class="literal">true</span>,</span><br><span class="line">                sourceMap: <span class="literal">true</span> <span class="comment">// set to true if you want JS source maps</span></span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = merge(common, prodConfig);</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>npm run dist</code></p>
</li>
</ol>
<h1 id="12-webpack的启动监控自动编译和启用js的sourcemap"><a href="#12-webpack的启动监控自动编译和启用js的sourcemap" class="headerlink" title="12.webpack的启动监控自动编译和启用js的sourcemap"></a>12.webpack的启动监控自动编译和启用js的sourcemap</h1><h2 id="启用js的sourcemap"><a href="#启用js的sourcemap" class="headerlink" title="启用js的sourcemap"></a>启用js的sourcemap</h2><ul>
<li>当 webpack 打包源代码时，可能会很难追踪到错误和警告在源代码中的原始位置。例如，如果将三个源文件（a.js, b.js 和 c.js）打包到一个 bundle（bundle.js）中，而其中一个源文件包含一个错误，那么堆栈跟踪就会简单地指向到 bundle.js。</li>
<li>webpack4可以直接使用 <code>inline-source-map</code> 选项，这有助于解释说明 js 原始出错的位置。（<strong>不要用于生产环境</strong>）</li>
</ul>
<ol>
<li><p>webpack.dev.js中加上一行</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);   <span class="comment">//引用path模块</span></span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">'./webpack.common'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//对外导出一个对象</span></span><br><span class="line"><span class="keyword">let</span> devConfig = &#123;</span><br><span class="line">    mode: <span class="string">'development'</span>,        <span class="comment">//代表我们现在是开发阶段</span></span><br><span class="line">    output: &#123;                   <span class="comment">//输出</span></span><br><span class="line">        filename: <span class="string">'main.js'</span>,    <span class="comment">//最终打包后的文件名</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>)<span class="comment">//最终main.js在哪个文件夹下</span></span><br><span class="line">    &#125;,</span><br><span class="line">+   devtool: <span class="string">'inline-source-map'</span>,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [                <span class="comment">//模块处理规则</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(sc|c|sa)ss$/</span>,</span><br><span class="line">                <span class="comment">//当引入的模块的后缀满足这个，就使用use的loader处理</span></span><br><span class="line">                use: [<span class="comment">//处理顺序从后向前</span></span><br><span class="line">                    <span class="string">'style-loader'</span>,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            ident: <span class="string">'postcss'</span>,</span><br><span class="line">                            sourceMap: <span class="literal">true</span>,</span><br><span class="line">                            plugins: <span class="function"><span class="params">loader</span> =&gt;</span> [</span><br><span class="line">                                <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123; <span class="attr">browsers</span>: [<span class="string">'&gt; 0.15% in CN'</span>] &#125;) <span class="comment">// 添加前缀</span></span><br><span class="line">                            ]</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'sass-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = merge(common,devConfig);</span><br></pre></td></tr></table></figure>
</li>
<li><p>在index.js中随便输出一点东西<code>console.log(123);</code></p>
</li>
<li><code>npm run build</code>，查看控制台<ul>
<li>在未使用inline-source-map时，输出的123指向的是index.js:21(打包后index.js头部增加了一些代码)</li>
<li>使用inline-source-map后，输出的123指向的是index.js:14</li>
</ul>
</li>
</ol>
<h2 id="监控文件变化，自动编译，使用观察模式"><a href="#监控文件变化，自动编译，使用观察模式" class="headerlink" title="监控文件变化，自动编译，使用观察模式"></a>监控文件变化，自动编译，使用观察模式</h2><ul>
<li>每次修改完毕后，都手动编译非常麻烦，最简单解决的办法就是启动watch。<br><code>npx webpack --watch</code></li>
</ul>
<ol>
<li><p>可修改package.json</p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">"test": "echo \"Error: no test specified\" &amp;&amp; exit 1",</span><br><span class="line">"build": "npx webpack --config webpack.dev.js",</span><br><span class="line">"watch":"npx webpack --watch --config webpack.dev.js",</span><br><span class="line">"dist": "npx webpack --config webpack.prod.js"</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>npm run watch</code></p>
</li>
<li>ctrl+c可以停止</li>
</ol>
<ul>
<li>但是有个bug，就是每次我们修改 js 或者 css 文件后，要看到修改后的 html 的变化，可能需要我自己重新刷新页面。</li>
<li>如何能不刷新页面，自动更新变化呢？，详见下一节</li>
</ul>
<h1 id="13-webpack的启动热更新和代理配置"><a href="#13-webpack的启动热更新和代理配置" class="headerlink" title="13.webpack的启动热更新和代理配置"></a>13.webpack的启动热更新和代理配置</h1><ul>
<li><code>webpack-dev-server</code> 为你提供了一个简单的 web 服务器，并且能够实时重新加载(live reloading)。</li>
<li><code>webpack-dev-server</code>编译速度快，编译到内存里，不写在dist中。</li>
</ul>
<ol>
<li>安装<br> <code>npm install --save-dev webpack-dev-server</code></li>
<li>修改开发阶段的配置文件,简单配置 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);   <span class="comment">//引用path模块</span></span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">'./webpack.common'</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//对外导出一个对象</span></span><br><span class="line"><span class="keyword">let</span> devConfig = &#123;</span><br><span class="line">    mode: <span class="string">'development'</span>,        <span class="comment">//代表我们现在是开发阶段</span></span><br><span class="line">    output: &#123;                   <span class="comment">//输出</span></span><br><span class="line">        filename: <span class="string">'main.js'</span>,    <span class="comment">//最终打包后的文件名</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>)<span class="comment">//最终main.js在哪个文件夹下</span></span><br><span class="line">    &#125;,</span><br><span class="line">    devtool: <span class="string">'inline-source-map'</span>,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        contentBase: <span class="string">'./dist'</span>,</span><br><span class="line">        hot: <span class="literal">true</span>,</span><br><span class="line">        open: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [                <span class="comment">//模块处理规则</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(sc|c|sa)ss$/</span>,</span><br><span class="line">                <span class="comment">//当引入的模块的后缀满足这个，就使用use的loader处理</span></span><br><span class="line">                use: [<span class="comment">//处理顺序从后向前</span></span><br><span class="line">                    <span class="string">'style-loader'</span>,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            ident: <span class="string">'postcss'</span>,</span><br><span class="line">                            sourceMap: <span class="literal">true</span>,</span><br><span class="line">                            plugins: <span class="function"><span class="params">loader</span> =&gt;</span> [</span><br><span class="line">                                <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123; <span class="attr">browsers</span>: [<span class="string">'&gt; 0.15% in CN'</span>] &#125;) <span class="comment">// 添加前缀</span></span><br><span class="line">                            ]</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'sass-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> webpack.NamedModulesPlugin(),  <span class="comment">// 更容易查看(patch)的依赖</span></span><br><span class="line">        <span class="keyword">new</span> webpack.HotModuleReplacementPlugin()  <span class="comment">// 替换插件</span></span><br><span class="line"></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = merge(common, devConfig);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>启动此webserver可用<br>  <code>webpack-dev-server --open</code></li>
<li>官网其他配置，也可以用这些配置  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">    clientLogLevel: <span class="string">'warning'</span>, <span class="comment">// 可能的值有 none, error, warning 或者 info（默认值)</span></span><br><span class="line">    hot: <span class="literal">true</span>,  <span class="comment">// 启用 webpack 的模块热替换特性, 这个需要配合： webpack.HotModuleReplacementPlugin插件</span></span><br><span class="line">    contentBase:  path.join(__dirname, <span class="string">"dist"</span>), <span class="comment">// 告诉服务器从哪里提供内容， 默认情况下，将使用当前工作目录作为提供内容的目录</span></span><br><span class="line">    compress: <span class="literal">true</span>, <span class="comment">// 一切服务都启用gzip 压缩</span></span><br><span class="line">    host: <span class="string">'0.0.0.0'</span>, <span class="comment">// 指定使用一个 host。默认是 localhost。如果你希望服务器外部可访问 0.0.0.0</span></span><br><span class="line">    port: <span class="number">8080</span>, <span class="comment">// 端口</span></span><br><span class="line">    open: <span class="literal">true</span>, <span class="comment">// 是否打开浏览器</span></span><br><span class="line">    overlay: &#123;  <span class="comment">// 出现错误或者警告的时候，是否覆盖页面线上错误消息。</span></span><br><span class="line">        warnings: <span class="literal">true</span>,</span><br><span class="line">        errors: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    publicPath: <span class="string">'/'</span>, <span class="comment">// 此路径下的打包文件可在浏览器中访问。</span></span><br><span class="line">    proxy: &#123;  <span class="comment">// 设置代理</span></span><br><span class="line">        <span class="string">"/api"</span>: &#123;  <span class="comment">// 访问api开头的请求，会跳转到  下面的target配置</span></span><br><span class="line">        target: <span class="string">"http://192.168.0.102:8080"</span>,</span><br><span class="line">        pathRewrite: &#123;<span class="string">"^/api"</span> : <span class="string">"/mockjsdata/5/api"</span>&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    quiet: <span class="literal">true</span>, <span class="comment">// necessary for FriendlyErrorsPlugin. 启用 quiet 后，除了初始启动信息之外的任何内容都不会被打印到控制台。这也意味着来自 webpack 的错误或警告在控制台不可见。</span></span><br><span class="line">    watchOptions: &#123; <span class="comment">// 监视文件相关的控制选项</span></span><br><span class="line">        poll: <span class="literal">true</span>,   <span class="comment">// webpack 使用文件系统(file system)获取文件改动的通知。在某些情况下，不会正常工作。例如，当使用 Network File System (NFS) 时。Vagrant 也有很多问题。在这些情况下，请使用轮询. poll: true。当然 poll也可以设置成毫秒数，比如：  poll: 1000</span></span><br><span class="line">        ignored: <span class="regexp">/node_modules/</span>, <span class="comment">// 忽略监控的文件夹，正则</span></span><br><span class="line">        aggregateTimeout: <span class="number">300</span> <span class="comment">// 默认值，当第一个文件更改，会在重新构建前增加延迟</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="3">
<li>此处，用<code>npx webpack-dev-server --config webpack.dev.js</code>，然后在路由上添加<code>/main.html</code></li>
<li>然后不管修改js还是其他，都会自动更新，然后会发现dist文件夹里没有文件，所以说明它编译是在内存里面生成的。</li>
<li><p>将命令加到package.json中</p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",</span><br><span class="line">    "build": "npx webpack --config webpack.dev.js",</span><br><span class="line">    "watch": "npx webpack --watch --config webpack.dev.js",</span><br><span class="line">    "start": "npx webpack-dev-server --config webpack.dev.js",</span><br><span class="line">    "dist": "npx webpack --config webpack.prod.js"</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用代理部分此处省略，具体请看第14个视频。会用到axios发起Ajax请求。</p>
</li>
</ol>
<h1 id="14-webpack的代理服务器设置和babel转换及优化"><a href="#14-webpack的代理服务器设置和babel转换及优化" class="headerlink" title="14.webpack的代理服务器设置和babel转换及优化"></a>14.webpack的代理服务器设置和babel转换及优化</h1><h2 id="babel转码"><a href="#babel转码" class="headerlink" title="babel转码"></a>babel转码</h2><ul>
<li>虽然现代的浏览器已经兼容了96%以上的ES6的语法了，但是为了兼容老式的浏览器（IE8、9）我们需要把最新的ES6的语法转成ES5的，那么babel的loader就出场了。</li>
</ul>
<ol>
<li>安装<br> <code>npm i -D babel-loader babel-core babel-preset-env</code></li>
<li><p>在webpack的配置文件中，添加js的处理模块。（开发阶段和生成阶段都需要，因此加到common里）</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            exclude: <span class="regexp">/(node_modules)/</span>,  <span class="comment">// 加快编译速度，不包含node_modules文件夹内容</span></span><br><span class="line">            use: &#123;</span><br><span class="line">                loader: <span class="string">'babel-loader'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在项目根目录下，添加babel的配置文件<code>.babelrc</code>，其内容为</p>
 <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"presets"</span>: [<span class="string">"env"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将原本的var改成let<a href="#压缩JS">压缩JS</a>，此时打包不会再报错；或者在index.js里添加一些ES6语法的内容</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Temp</span> </span>&#123;</span><br><span class="line">    show() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'this.Age :'</span>, <span class="keyword">this</span>.Age);</span><br><span class="line">    &#125;</span><br><span class="line">    get Age() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._age;</span><br><span class="line">    &#125;</span><br><span class="line">    set Age(val) &#123;</span><br><span class="line">        <span class="keyword">this</span>._age = val + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> t = <span class="keyword">new</span> Temp();</span><br><span class="line">t.Age = <span class="number">19</span>;</span><br><span class="line">t.show();</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>npm run build</code></p>
</li>
</ol>
<ul>
<li>查看生成的main.js，发现原来的let已被替换成var</li>
<li>此处可能会产生报错，报错原因是找不到@babel/core，解决方法详见<a href="https://www.cnblogs.com/soyxiaobi/p/9554565.html" target="_blank" rel="noopener">https://www.cnblogs.com/soyxiaobi/p/9554565.html</a></li>
</ul>
<h2 id="babel优化"><a href="#babel优化" class="headerlink" title="babel优化"></a>babel优化</h2><ul>
<li>babel-loader可以配置如下几个options：<ul>
<li>cacheDirectory：默认值为 false。当有设置时，指定的目录将用来缓存 loader 的执行结果。之后的 webpack 构建，将会尝试读取缓存，来避免在每次执行时，可能产生的、高性能消耗的 Babel 重新编译过程(recompilation process)。如果设置了一个空值 (loader: ‘babel-loader?cacheDirectory’) 或者 true (loader: babel-loader?cacheDirectory=true)，loader 将使用默认的缓存目录 node_modules/.cache/babel-loader，如果在任何根目录下都没有找到 node_modules 目录，将会降级回退到操作系统默认的临时文件目录。（<strong>使用跟这个可以提升编译速度</strong>）</li>
<li>cacheIdentifier：默认是一个由 babel-core 版本号，babel-loader 版本号，.babelrc 文件内容（存在的情况下），环境变量 BABEL_ENV 的值（没有时降级到 NODE_ENV）组成的字符串。可以设置为一个自定义的值，在 identifier 改变后，强制缓存失效。</li>
<li>forceEnv：默认将解析 BABEL_ENV 然后是 NODE_ENV。允许你在 loader 级别上覆盖 BABEL_ENV/NODE_ENV。对有不同 babel 配置的，客户端和服务端同构应用非常有用。</li>
</ul>
</li>
<li><p>注意：sourceMap 选项是被忽略的。当 webpack 配置了 sourceMap 时（通过 devtool 配置选项），将会自动生成 sourceMap。</p>
</li>
<li><p>babel 在每个文件都插入了辅助代码，使代码体积过大.babel 对一些公共方法使用了非常小的辅助代码，比如 _extend。 默认情况下会被添加到每一个需要它的文件中。你可以引入 babel runtime 作为一个独立模块，来避免重复引入。</p>
<ol>
<li><p>安装</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-plugin-transform-runtime --save-dev</span><br><span class="line">npm install babel-runtime --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">rules: [</span><br><span class="line"><span class="comment">// 'transform-runtime' 插件告诉 babel 要引用 runtime 来代替注入。</span></span><br><span class="line">    &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">        use: &#123;</span><br><span class="line">        loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改.babelrc</p>
 <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"presets"</span>: [<span class="string">"env"</span>],</span><br><span class="line">    <span class="attr">"plugins"</span>: [</span><br><span class="line">        [<span class="string">"transform-runtime"</span>, &#123;</span><br><span class="line">        <span class="attr">"helpers"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"polyfill"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"regenerator"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"moduleName"</span>: <span class="string">"babel-runtime"</span></span><br><span class="line">        &#125;]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>此时，webpack打包的时候，会自动优化重复引入公共方法的问题。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h1 id="15-webpack的eslint校验配置"><a href="#15-webpack的eslint校验配置" class="headerlink" title="15.webpack的eslint校验配置"></a>15.webpack的eslint校验配置</h1><ul>
<li>ESLint校验代码格式规范</li>
</ul>
<ol>
<li><p>安装</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install eslint --save-dev</span><br><span class="line">npm install eslint-loader --save-dev</span><br><span class="line"> </span><br><span class="line"># 以下是用到的额外的需要安装的eslint的解释器、校验规则等</span><br><span class="line">npm i -D babel-eslint standard</span><br></pre></td></tr></table></figure>
</li>
<li><p>在webpack.common.js中配置，把ESLint的配置放到处理js文件的最后</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">rules: [</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            exclude: <span class="regexp">/(node_modules)/</span>,  <span class="comment">// 加快编译速度，不包含node_modules文件夹内容</span></span><br><span class="line">            use: [&#123;</span><br><span class="line">                loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    cacheDirectory: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                loader: <span class="string">"eslint-loader"</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    <span class="comment">// eslint options (if necessary)</span></span><br><span class="line">                    fix: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>eslint配置可以直接放到webpack的配置文件中，也可以直接放到项目根目录的 .eslintrc中(<a href="https://eslint.org/docs/developer-guide/nodejs-api#cliengine" target="_blank" rel="noopener">文档</a>)。</p>
</li>
</ol>
<ul>
<li>也可以将eslint配置文件创建为<code>.eslintrc.js</code>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .eslintrc.js</span></span><br><span class="line"><span class="comment">// https://eslint.org/docs/user-guide/configuring</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">root: <span class="literal">true</span>,</span><br><span class="line">parserOptions: &#123;</span><br><span class="line">    parser: <span class="string">'babel-eslint'</span></span><br><span class="line">&#125;,</span><br><span class="line">env: &#123;</span><br><span class="line">    browser: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br><span class="line">extends: [</span><br><span class="line">    <span class="comment">// https://github.com/standard/standard/blob/master/docs/RULES-en.md</span></span><br><span class="line">    <span class="string">'standard'</span></span><br><span class="line">],</span><br><span class="line">globals: &#123;</span><br><span class="line">    NODE_ENV: <span class="literal">false</span></span><br><span class="line">&#125;,</span><br><span class="line">rules: &#123;</span><br><span class="line">    <span class="comment">// allow async-await</span></span><br><span class="line">    <span class="string">'generator-star-spacing'</span>: <span class="string">'off'</span>,</span><br><span class="line">    <span class="comment">// allow debugger during development</span></span><br><span class="line">    <span class="string">'no-debugger'</span>: process.env.NODE_ENV === <span class="string">'production'</span> ? <span class="string">'error'</span> : <span class="string">'off'</span>,</span><br><span class="line">    <span class="comment">// 添加，分号必须</span></span><br><span class="line">    semi: [<span class="string">'error'</span>, <span class="string">'always'</span>],</span><br><span class="line">    <span class="string">'no-unexpected-multiline'</span>: <span class="string">'off'</span>,</span><br><span class="line">    <span class="string">'space-before-function-paren'</span>: [<span class="string">'error'</span>, <span class="string">'never'</span>],</span><br><span class="line">    <span class="comment">// 'quotes': ["error", "double", &#123; "avoidEscape": true &#125;]</span></span><br><span class="line">    quotes: [</span><br><span class="line">    <span class="string">'error'</span>,</span><br><span class="line">    <span class="string">'single'</span>,</span><br><span class="line">    &#123;</span><br><span class="line">        avoidEscape: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="4">
<li><p>最好在根目录下再加一个<code>.eslintignore</code>文件，去忽略一些文件</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/dist/</span><br><span class="line">/node_modules/</span><br><span class="line">/*.js</span><br></pre></td></tr></table></figure>
<ul>
<li>这样vscode的eslint插件就不会报错了</li>
</ul>
</li>
<li>然后在src的index.js文件中多添加一些分号，<code>npm run build</code>之后查看生成的main.js文件，发现自动修复了<hr>

</li>
</ol>
<p>16.webpack的模块解析后缀和别名配置详解</p>
<pre><code>1. 创建 import 或 require 的别名，来确保模块引入变得更简单。
2. 自动解析确定的扩展。
</code></pre><p>17.webpack的模块的外部依赖配置</p>
<pre><code>1. 把一个模块做成外部依赖，最终不会打包到js文件中去 
</code></pre><p>18.webpack的打包分析报表插件与优化总结<br>以上三课本文不作详细阐释，有兴趣可查看视频或查看于文末的链接查看相关笔记</p>

        
    

    
</div>


   <div>
   <br/>
   <ul id="post-license" class="post-license">
       <li class="post-license-author">
           <strong>本文作者：</strong>
           <a href="https://niccce.github.io">Niccce</a>
       </li>

       <li class="post-license-link">
           <strong>本文链接：</strong>
           <a href="https://niccce.github.io/2019/08/27/quick-to-learn-Webpack4-x/">https://niccce.github.io/2019/08/27/quick-to-learn-Webpack4-x/</a>
           <!-- <a href="https://niccce.github.io/2019/08/27/quick-to-learn-Webpack4-x/">webpack4.x快速入门</a> -->
       </li>

       <li class="post-license-statement">
           <strong>版权声明： </strong>
           本文由 Niccce 原创，采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="license" target="_blank">署名-非商业性使用-相同方式共享（CC BY-NC-SA）4.0 国际许可协议</a>
		   </br>转载请保留以上声明信息！
       </li>
   </ul>
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2019/09/04/Knowledge-Points-of-ES6/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2019/08/12/some-programming-question-of-nowcoder/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.jpg);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/Niccce.jpg" alt="Niccce's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        Welcome to my secret garden!
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:niccce@foxmail.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2019/10/">十月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/09/">九月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/08/">八月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/06/">六月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/09/">九月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/08/">八月 2018<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/essay/">essay<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/学习汇总/">学习汇总<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/汇总整理/">汇总整理<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/读书笔记/">读书笔记<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/面试总结/">面试总结<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="标签">
                
                    <i class="material-icons sidebar-material-icons">local_offer</i>
                
                标签
            </a>
        </li>
        
    
        <li>
            <a href="/timeline" title="Timeline">
                
                    <i class="material-icons sidebar-material-icons">send</i>
                
                Timeline
            </a>
        </li>
        
    
        <li>
            <a href="/myWorks" title="我的作品集">
                
                    <i class="material-icons sidebar-material-icons">book</i>
                
                我的作品集
            </a>
        </li>
        
    
        <li>
            <a href="/links" title="友情链接">
                
                    <i class="material-icons sidebar-material-icons">person_add</i>
                
                友情链接
            </a>
        </li>
        
    
        <li>
            <a href="/aboutMe" title="About Me">
                
                    <i class="material-icons sidebar-material-icons">account_box</i>
                
                About Me
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    
        <a href="https://weibo.com/u/2583021730" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-weibo">
                <span class="visuallyhidden">Weibo</span>
            </button><!--
     --></a>
    

    <!-- Instagram -->
    
        <a href="https://www.instagram.com/niccce1208/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-instagram">
                <span class="visuallyhidden">Instagram</span>
            </button><!--
     --></a>
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/Niccce" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    
        <a href="https://space.bilibili.com/11197209/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-bilibili">
                <span class="visuallyhidden">Bilibili</span>
            </button><!--
     --></a>
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;2018&nbsp;-<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>Secret garden
            
                <br>
                
                    Keep Calm and Smile On
                
            
        </div>



        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
		-->


		<div class="mdl-mini-footer--right-section">
            <div>
                <!--<span id="busuanzi_container_site_uv">访客数<span id="busuanzi_value_site_uv"></span>人次</span>-->
                <div class="footer-develop-div">Powered by Hexo</div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>







    <!-- Busuanzi -->
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>







<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
